/**
 * @license
 * Copyright (c) 2014, 2023, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojcore-base","ojs/ojdomutils","ojs/ojlogger","ojs/ojkeyboardfocus-utils"],function(e,t,n,i,l){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const s=function(){};s._DATA_OJ_TABMOD="data-oj-tabmod",s._FOCUSABLE_ELEMENTS_TAG=["input","select","button","a","textarea","object"],s.CHECKVIEWPORT_THRESHOLD=3,s.getFocusableElementsInNode=function(e,t){return l.getFocusableElementsInNode(e,t)},s.checkVisibility=function(e){return l.checkVisibility(e)},s.disableElement=function(e){l.disableElement(e)},s.disableAllFocusableElements=function(e,t,n){return l.disableAllFocusableElements(e,t,n)},s.enableAllFocusableElements=function(e){return l.enableAllFocusableElements(e)},s.isFromDefaultSelector=function(e){return e.target.classList.contains("oj-selectorbox")},s.getActionableElementsInNode=function(e){return l.getActionableElementsInNode(e)},s.isElementOrAncestorFocusable=function(e,t){return!(null==e||t&&t(e))&&(!!e.hasAttribute(s._DATA_OJ_TABMOD)||(e.tabIndex>=0||(s._FOCUSABLE_ELEMENTS_TAG.indexOf(e.tagName.toLowerCase())>-1||s.isElementOrAncestorFocusable(e.parentElement,t))))},s.handleActionableTab=function(e,t){var n=s.getFocusableElementsInNode(t);return n.length>0&&e.target===n[n.length-1]&&(n[0].focus(),!0)},s.handleActionablePrevTab=function(e,t){var n=s.getFocusableElementsInNode(t);return n.length>0&&e.target===n[0]&&(n[n.length-1].focus(),!0)},s.isEventClickthroughDisabled=function(e,t){for(var n=e.target;null!=n&&n!==t;){if(s.isClickthroughDisabled(n))return!0;n=n.parentNode}return!1},s.isClickthroughDisabled=function(e){return"disabled"===e.dataset.ojClickthrough},s.getDefaultScrollBarWidth=function(e){var t;if(e&&e.style){var n=e.style.visibility,i=e.style.position,l=e.style.overflowY,s=e.style.height,r=e.style.width;e.style.visibility="hidden",e.style.position="absolute",e.style.overflowY="hidden",e.style.height="50px",e.style.width="50px";var o=e.offsetWidth-e.clientWidth;e.style.overflowY="scroll",t=e.offsetWidth-e.clientWidth-o,e.style.width=r,e.style.height=s,e.style.overflowY=l,e.style.position=i,e.style.visibility=n}return t},s.disableDefaultBrowserStyling=function(e){e.setAttribute("x-ms-format-detection","none")},s.applyMergedInlineStyles=function(e,t,n){var i=s.convertStringToStyleObj(n),l=s.convertStringToStyleObj(t),r=Object.assign({},i,l);s.applyStyleObj(e,r)},s.convertStringToStyleObj=function(e){var t={};if(e.split)for(var n=e.split(";"),i=0;i<n.length;i++){var l=n[i];if(""!==l){var s=l.split(":");2===s.length&&(t[s[0].trim()]=s[1].trim())}}return t},s.applyStyleObj=function(e,t){for(var n=Object.keys(t),i=Object.values(t),l=0;l<n.length;l++)e.style[n[l]]=i[l]},s.isMobileTouchDevice=function(){var e=t.AgentUtils.getAgentInfo();return e.os===t.AgentUtils.OS.IOS||e.os===t.AgentUtils.OS.ANDROID||e.os===t.AgentUtils.OS.WINDOWSPHONE},s.getNoJQFocusHandlers=function(e,t){return n.getNoJQFocusHandlers(e,t)},s.areKeySetsEqual=function(e,n){if(e===n)return!0;var i,l,s=e.isAddAll();if(s!==n.isAddAll())return!1;if(s?(i=e.deletedValues(),l=n.deletedValues()):(i=e.values(),l=n.values()),i.size!==l.size)return!1;for(var r=i.values(),o=l.values(),E=r.next(),a=o.next();!E.done;){if(!t.KeyUtils.equals(E.value,a.value))return!1;E=r.next(),a=o.next()}return!0},s.KEYBOARD_KEYS={_SPACEBAR:" ",_SPACEBAR_IE:"SpaceBar",_SPACEBAR_CODE:32,_ENTER:"Enter",_ENTER_CODE:13,_UP:"ArrowUp",_UP_IE:"Up",_UP_CODE:38,_DOWN:"ArrowDown",_DOWN_IE:"Down",_DOWN_CODE:40,_LEFT:"ArrowLeft",_LEFT_IE:"Left",_LEFT_CODE:37,_RIGHT:"ArrowRight",_RIGHT_IE:"Right",_RIGHT_CODE:39,_HOME:"Home",_HOME_CODE:36,_END:"End",_END_CODE:35,_TAB:"Tab",_TAB_CODE:9,_ESCAPE:"Escape",_ESCAPE_IE:"Esc",_ESCAPE_CODE:27,_F2:"F2",_F2_CODE:113,_NUM5_KEY:"5",_NUM5_KEY_CODE:53,_LETTER_A:"a",_LETTER_A_UPPERCASE:"A",_LETTER_A_CODE:65,_META:"Meta",_META_CODE:91},s.isEnterKeyEvent=function(e){return e===s.KEYBOARD_KEYS._ENTER||e===s.KEYBOARD_KEYS._ENTER_CODE},s.isSpaceBarKeyEvent=function(e){return e===s.KEYBOARD_KEYS._SPACEBAR||e===s.KEYBOARD_KEYS._SPACEBAR_IE||e===s.KEYBOARD_KEYS._SPACEBAR_CODE},s.isEscapeKeyEvent=function(e){return e===s.KEYBOARD_KEYS._ESCAPE||e===s.KEYBOARD_KEYS._ESCAPE_IE||e===s.KEYBOARD_KEYS._ESCAPE_CODE},s.isTabKeyEvent=function(e){return e===s.KEYBOARD_KEYS._TAB||e===s.KEYBOARD_KEYS._TAB_CODE},s.isF2KeyEvent=function(e){return e===s.KEYBOARD_KEYS._F2||e===s.KEYBOARD_KEYS._F2_CODE},s.isHomeKeyEvent=function(e){return e===s.KEYBOARD_KEYS._HOME||e===s.KEYBOARD_KEYS._HOME_CODE},s.isEndKeyEvent=function(e){return e===s.KEYBOARD_KEYS._END||e===s.KEYBOARD_KEYS._END_CODE},s.isArrowUpKeyEvent=function(e){return e===s.KEYBOARD_KEYS._UP||e===s.KEYBOARD_KEYS._UP_IE||e===s.KEYBOARD_KEYS._UP_CODE},s.isArrowDownKeyEvent=function(e){return e===s.KEYBOARD_KEYS._DOWN||e===s.KEYBOARD_KEYS._DOWN_IE||e===s.KEYBOARD_KEYS._DOWN_CODE},s.isArrowLeftKeyEvent=function(e){return e===s.KEYBOARD_KEYS._LEFT||e===s.KEYBOARD_KEYS._LEFT_IE||e===s.KEYBOARD_KEYS._LEFT_CODE},s.isArrowRightKeyEvent=function(e){return e===s.KEYBOARD_KEYS._RIGHT||e===s.KEYBOARD_KEYS._RIGHT_IE||e===s.KEYBOARD_KEYS._RIGHT_CODE},s.isNumberFiveKeyEvent=function(e){return e===s.KEYBOARD_KEYS._NUM5_KEY||e===s.KEYBOARD_KEYS._NUM5_KEY_CODE},s.isLetterAKeyEvent=function(e){return e===s.KEYBOARD_KEYS._LETTER_A||e===s.KEYBOARD_KEYS._LETTER_A_UPPERCASE||e===s.KEYBOARD_KEYS._LETTER_A_CODE},s.isMetaKeyEvent=function(e){return e===s.KEYBOARD_KEYS._META||e===s.KEYBOARD_KEYS._META_CODE},s.getAddEventKeysResult=function(e,t,n){var i,l,r,o,E;function a(e,t){return{key:e,index:t}}var u=e.slice(),c=[];t.keys.forEach(function(e){c.push(e)});var A=[],_=t.addBeforeKeys?t.addBeforeKeys:t.afterKeys;null!=_&&_.forEach(function(e){A.push(e)});var f=t.indexes;if(A.length===c.length)for(var g=0;c.length!==g;)for(g=c.length,i=c.length-1;i>=0;i--)r=c[i],s.containsKey(u,r)||(null!=(l=A[i])?-1!==(E=s._indexOfKey(u,l))&&(u.splice(E,0,r),A.splice(i,1),c.splice(i,1)):n&&(u.push(r),A.splice(i,1),c.splice(i,1)));else if(null!=f&&f.length===c.length){var d=[];for(i=0;i<c.length;i++)if(r=c[i],!s.containsKey(u,r))if(null!=(o=f[i])){for(var K=!1,O=0;O<d.length;O++)if(d[O].index>o){d.splice(O,0,a(r,o)),K=!0;break}K||d.push(a(r,o))}else n&&u.push(r);for(i=0;i<d.length;i++){var y=d[i];y.index<u.length?u.splice(y.index,0,y.key):y.index===u.length&&n&&u.push(y.key)}}else n&&c.forEach(function(e){u.push(e)});return u},s.containsKey=function(e,n){for(var i=0;i<e.length;i++)if(t.KeyUtils.equals(e[i],n))return!0;return!1},s._indexOfKey=function(e,n){for(var i=0;i<e.length;i++)if(t.KeyUtils.equals(e[i],n))return i;return-1},s.calculateOffsetTop=function(e,t){for(var n=0,i=t;i&&i!==e&&e.contains(i);)n+=i.offsetTop,i=i.offsetParent;return n},s.getLogicalChildPopup=function(e){return l.getLogicalChildPopup(e)},s.isElementIntersectingScrollerBounds=function(e,t){var n,i,l,s;if(t===document.documentElement)n=0,i=document.documentElement.clientHeight,l=0,s=document.documentElement.clientWidth;else{var r=t.getBoundingClientRect();n=r.top,i=r.bottom,l=r.left,s=r.right}var o=e.getBoundingClientRect();return o.top<=i&&o.bottom>=n&&o.left<=s&&o.right>=l},s.getEventDetail=function(e,t){return new Promise(n=>{if(t.data&&t.metadata)n(t);else{const l=e.getCapability("fetchByKeys");l&&"lookup"===l.implementation?e.fetchByKeys({keys:new Set(t.keys),scope:"global"}).then(e=>{t.data=[],t.metadata=[],t.keys.forEach(n=>{const i=e.results.get(n);t.data.push(i.data),t.metadata.push(i.metadata)}),n(t)},e=>{i.error("Error fetching event detail due to fetchByKeys: "+e),n(null)}):(i.error("Error fetching event detail due to fetchByKeys: capability"),n(null))}})},s.isIterateAfterDoneNotAllowed=function(e){if(e&&e.getCapability){var t=e.getCapability("fetchFirst");if(t&&"notAllowed"===t.iterateAfterDone)return!0}return!1},s.isRequestIdleCallbackSupported=function(){return null!=window.requestIdleCallback&&null!=window.cancelIdleCallback&&null!=window.IdleDeadline},s.isChrome=function(){return t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.CHROME},s.isFirefox=function(){return t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.FIREFOX},s.isIE=function(){return t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.IE},s.isEdge=function(){return t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.EDGE},s.isSafari=function(){return t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.SAFARI},s.isMac=function(){return t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.MAC},s.isWindows=function(){return t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.WINDOWS},s.isIos=function(){return t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.IOS},s.isAndroid=function(){return t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.ANDROID},s.isBlink=function(){return t.AgentUtils.getAgentInfo().engine===t.AgentUtils.ENGINE.BLINK};const r=s.applyMergedInlineStyles,o=s.applyStyleObj,E=s.areKeySetsEqual,a=s.containsKey,u=s.convertStringToStyleObj,c=s.disableElement,A=s.disableAllFocusableElements,_=s.disableDefaultBrowserStyling,f=s.enableAllFocusableElements,g=s.getActionableElementsInNode,d=s.getAddEventKeysResult,K=s.getDefaultScrollBarWidth,O=s.isElementOrAncestorFocusable,y=s.isIterateAfterDoneNotAllowed,D=s.getFocusableElementsInNode,S=s.getLogicalChildPopup,b=s.getNoJQFocusHandlers,v=s.handleActionablePrevTab,h=s.handleActionableTab,R=s.isArrowDownKeyEvent,p=s.isArrowLeftKeyEvent,B=s.isArrowRightKeyEvent,Y=s.isArrowUpKeyEvent,I=s.isClickthroughDisabled,C=s.isEndKeyEvent,T=s.isEnterKeyEvent,m=s.isEscapeKeyEvent,w=s.isEventClickthroughDisabled,N=s.isFromDefaultSelector,F=s.isF2KeyEvent,U=s.isHomeKeyEvent,P=s.isMobileTouchDevice,L=s.isSpaceBarKeyEvent,M=s.isTabKeyEvent,W=s.isNumberFiveKeyEvent,k=s.isLetterAKeyEvent,H=s.isMetaKeyEvent,j=s.KEYBOARD_KEYS,x=s.CHECKVIEWPORT_THRESHOLD,G=s.calculateOffsetTop,q=s.isElementIntersectingScrollerBounds,V=s.getEventDetail,J=s.isRequestIdleCallbackSupported,Q=s.isChrome,z=s.isFirefox,X=s.isSafari,Z=s.isEdge,$=s.isIE,ee=s.isMac,te=s.isWindows,ne=s.isIos,ie=s.isAndroid,le=s.isWebkit=function(){return t.AgentUtils.getAgentInfo().engine===t.AgentUtils.ENGINE.WEBKIT},se=s.isBlink,re=s.getBrowserVersion=function(){return parseInt(t.AgentUtils.getAgentInfo().browserVersion,10)};e.CHECKVIEWPORT_THRESHOLD=x,e.KEYBOARD_KEYS=j,e.applyMergedInlineStyles=r,e.applyStyleObj=o,e.areKeySetsEqual=E,e.calculateOffsetTop=G,e.containsKey=a,e.convertStringToStyleObj=u,e.disableAllFocusableElements=A,e.disableDefaultBrowserStyling=_,e.disableElement=c,e.enableAllFocusableElements=f,e.getActionableElementsInNode=g,e.getAddEventKeysResult=d,e.getBrowserVersion=re,e.getDefaultScrollBarWidth=K,e.getEventDetail=V,e.getFocusableElementsInNode=D,e.getLogicalChildPopup=S,e.getNoJQFocusHandlers=b,e.handleActionablePrevTab=v,e.handleActionableTab=h,e.isAndroid=ie,e.isArrowDownKeyEvent=R,e.isArrowLeftKeyEvent=p,e.isArrowRightKeyEvent=B,e.isArrowUpKeyEvent=Y,e.isBlink=se,e.isChrome=Q,e.isClickthroughDisabled=I,e.isEdge=Z,e.isElementIntersectingScrollerBounds=q,e.isElementOrAncestorFocusable=O,e.isEndKeyEvent=C,e.isEnterKeyEvent=T,e.isEscapeKeyEvent=m,e.isEventClickthroughDisabled=w,e.isF2KeyEvent=F,e.isFirefox=z,e.isFromDefaultSelector=N,e.isHomeKeyEvent=U,e.isIE=$,e.isIos=ne,e.isIterateAfterDoneNotAllowed=y,e.isLetterAKeyEvent=k,e.isMac=ee,e.isMetaKeyEvent=H,e.isMobileTouchDevice=P,e.isNumberFiveKeyEvent=W,e.isRequestIdleCallbackSupported=J,e.isSafari=X,e.isSpaceBarKeyEvent=L,e.isTabKeyEvent=M,e.isWebkit=le,e.isWindows=te,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdatacollection-common.js.map