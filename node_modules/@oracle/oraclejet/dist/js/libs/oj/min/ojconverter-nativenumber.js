/**
 * @license
 * Copyright (c) 2014, 2023, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojconfig"],function(t,e){"use strict";const n=/^([+|-])?(\d+\.\d+|\.?\d+)(?:[e|E])([+|-])?(\d+)$/,i=/^([+|-])?(\d+\.\d+|\.?\d+)$/,o=/0+$/,r=/^0+/;function a(t){let e=t.match(i);if(e){const t="-"===e[1];return Object.assign({negative:t},l(e[2]))}if(e=t.match(n),e){const t="-"===e[1],n=l(e[2]);let i=parseInt(e[4]);return i="-"===e[3]?-i:i,Object.assign({negative:t},s(n,i))}throw new Error("Not a valid number")}function s(t,e){let{whole:n,decimal:i}=t;if(0===e||""===n&&""===i)return t;if(e>0){const t=Math.min(e,i.length),o=Math.max(e-t,0);n=n+i.substring(0,t)+"0".repeat(o),t>0&&(i=i.substring(t))}else{const t=Math.min(-e,n.length),o=Math.max(-e-t,0),r=n.length-t;i="0".repeat(o)+n.substring(r)+i,t>0&&(n=n.substring(0,r))}return n=c(n,!1),i=c(i,!0),{whole:n,decimal:i}}function l(t){let e="",n="";const i=t.split(".");if(1==i.length){const o=i[0];t.startsWith(".")?n=o:e=o}else e=i[0],n=i[1];return{whole:c(e,!1),decimal:c(n,!0)}}function c(t,e){return t.replace(e?o:r,"")}function u(t){let e=g.get(t);return e||(e=function(t){const e=function(t){const e=new Intl.NumberFormat(t,{useGrouping:!1,maximumFractionDigits:0}),n=new Map,i=e.format(9876543210);for(let t=0;t<10;t++){const e=i[t],o=(9-t).toString();n.set(e,o)}return n}(t),n=function(t){return d(t,{maximumFractionDigits:1,minimumFractionDigits:1},1.1,"decimal",".")}(t),i=m(t,!1),o=m(t,!0),r=function(t){return d(t,{style:"percent"},1,"percentSign","%")}(t),a=function(t){return d(t,{notation:"scientific"},100,"exponentSeparator","E")}(t);return{localToAsciiNumbers:e,decimalSeparator:n,negativeSign:i,positiveSign:o,percentSign:r,exponentSeparator:a}}(t),g.set(t,e)),e}function m(t,e){const n={signDisplay:"always"};return e?d(t,n,1,"plusSign","+"):d(t,n,-1,"minusSign","-")}function d(t,e,n,i,o){var r,a;return null!==(a=null===(r=new Intl.NumberFormat(t,e).formatToParts(n).find(t=>t.type===i))||void 0===r?void 0:r.value)&&void 0!==a?a:o}const g=new Map,h=new Map([["HALF_UP","halfExpand"],["HALF_DOWN","halfTrunc"],["HALF_EVEN","halfEven"],["UP","expand"],["DOWN","trunc"],["CEILING","ceil"],["FLOOR","floor"]]),p=/0+$/;function v(t,e,n){let{whole:i,negative:o,decimal:r}=t;const a=r.length-e;if(a>0){const t=(i||"0")+r,s=[];let l=t.length-2,c=parseInt(t[l+1]);for(let e=0;l>=0;l--){let i=parseInt(t[l]);10===c&&(c=0,i++),e<a?(c=w(i,c,o,n),e++):(s.unshift(String(c)),c=i)}if(10===c?(s.unshift("0"),s.unshift("1")):s.unshift(String(c)),0===e)i=s.join(""),r="";else{i=s.slice(0,-e).join(""),r=s.slice(-e).join("").replace(p,"")}}return{whole:i,decimal:r}}function f(t){var e;const n=null!==(e=t.roundingMode)&&void 0!==e?e:"HALF_UP",i=h.get(n);if(!i)throw new Error("Invalid rounding mode");return i}function w(t,e,n,i){if(0===e||"DOWN"===i||"CEILING"===i&&n||"FLOOR"===i&&!n)return t;switch(i){case"HALF_UP":return t+(e>=5?1:0);case"HALF_DOWN":return t+(e>5?1:0);case"HALF_EVEN":return t+(5==e&&t%2==0||e<5?0:1);case"UP":case"CEILING":case"FLOOR":return t+1;default:throw new Error("Invalid rounding mode "+i)}}const b=new Set(["0","1","2","3","4","5","6","7","8","9"]);function y(t,e,n){const i=u(n),{decimal:o,group:r}=e.separators,{negativeSign:l,positiveSign:c,percentSign:m,localToAsciiNumbers:d,exponentSeparator:g}=i;let h,p=0,f="";for(let n of t)switch(n){case l:case"-":f+="-";break;case o:f+=".";break;case g:case"E":case"e":f+="E";break;case m:case"%":case c:case"+":case r:break;default:const t=d.get(n);t?f+=t:(F(e),b.has(n)&&(f+=n))}"percent"===e.style&&(p=-2);try{h=a(f)}catch(t){I()}0!==p&&(h=Object.assign({negative:h.negative},s(h,p))),e.roundDuringParse&&(h=Object.assign({negative:h.negative},v(h,e.maximumFractionDigits,e.roundingMode)));const w=h.whole||"0",y=""!==h.decimal;return f=(h.negative?"-":"")+w+(y?"."+h.decimal:""),f}function F(t){"none"===t.lenientParse&&I()}function I(){throw new Error("Not a valid number",{cause:"userInput"})}function D(t,e){var n,i,o,r,a,s,l,c,m,d,g,h,p,v,f;const w=function(t){let e;switch(t.style){case"decimal":case void 0:e=function(t){var e;const n=null!==(e=t.decimalFormat)&&void 0!==e?e:"standard",i={style:"decimal"};switch(n){case"short":i.notation="compact",i.compactDisplay="short";break;case"long":i.notation="compact",i.compactDisplay="long";break;case"standard":break;default:throw new Error("Invalid decimalFormat: "+n)}return i}(t);break;case"currency":e=function(t){var e,n;const i=null!==(e=t.currencyFormat)&&void 0!==e?e:"standard",o=t.currency;if(!o)throw new Error("Currency option is required for currency style");const r={style:"currency",currency:o,currencyDisplay:null!==(n=t.currencyDisplay)&&void 0!==n?n:"symbol"};switch(i){case"short":r.notation="compact",r.compactDisplay="short";break;case"standard":break;default:throw new Error("Invalid currencyFormat: "+i)}return r}(t);break;case"percent":e={style:"percent"};break;case"unit":const n=t.unit;if("byte"!==n&&"bit"!==n)throw new Error("invalid unit name");e={style:"unit",unitDisplay:"short",unit:n};break;default:throw new Error("Invalid format style")}return e}(t),{defaultMinFractionDigits:b,defaultMaxFractionDigits:y}=function(t,e){var n,i;const o=null!==(n=new Intl.NumberFormat(e,t).resolvedOptions().minimumFractionDigits)&&void 0!==n?n:0,r=null!==(i=new Intl.NumberFormat(e,t).resolvedOptions().maximumFractionDigits)&&void 0!==i?i:0;return{defaultMinFractionDigits:o,defaultMaxFractionDigits:r}}(w,e),F=null!==(n=t.minimumFractionDigits)&&void 0!==n?n:Math.min(b,null!==(i=t.maximumFractionDigits)&&void 0!==i?i:Number.MAX_SAFE_INTEGER),I=null!==(o=t.maximumFractionDigits)&&void 0!==o?o:Math.max(F,y);if(F>I)throw new Error("maximumFractionDigits value is out of range");const D={locale:e,minimumIntegerDigits:null!==(r=t.minimumIntegerDigits)&&void 0!==r?r:0,minimumFractionDigits:F,maximumFractionDigits:I,useGrouping:null!==(a=t.useGrouping)&&void 0!==a?a:void 0!==O(w,e,!1),lenientParse:null!==(s=t.lenientParse)&&void 0!==s?s:"full",roundDuringParse:null!==(l=t.roundDuringParse)&&void 0!==l&&l,roundingMode:null!==(c=t.roundingMode)&&void 0!==c?c:"HALF_UP",separators:{decimal:null!==(d=null===(m=t.separators)||void 0===m?void 0:m.decimal)&&void 0!==d?d:u(e).decimalSeparator,group:null!==(h=null===(g=t.separators)||void 0===g?void 0:g.group)&&void 0!==h?h:O(w,e)}};let M;switch(t.style){case"decimal":case void 0:M=Object.assign({style:"decimal",decimalFormat:null!==(p=t.decimalFormat)&&void 0!==p?p:"standard"},D);break;case"currency":M=Object.assign({style:"currency",currency:t.currency,currencyFormat:null!==(v=t.currencyFormat)&&void 0!==v?v:"standard",currencyDisplay:null!==(f=t.currencyDisplay)&&void 0!==f?f:"symbol"},D);break;case"percent":M=Object.assign({style:"percent"},D);break;case"unit":M=Object.assign({style:"unit",unit:t.unit},D)}return{resolved:M,native:w}}function O(t,e,n=!0){var i;const o=n?Object.assign(Object.assign({},t),{useGrouping:!0}):t;return null===(i=new Intl.NumberFormat(e,o).formatToParts(1e6).find(t=>"group"===t.type))||void 0===i?void 0:i.value}const M=[Math.pow(10,3),Math.pow(10,6),Math.pow(10,9),Math.pow(10,12),Math.pow(10,15)],N=[Math.pow(10,3),Math.pow(10,6),Math.pow(10,9),Math.pow(10,12)],_=[Math.pow(10,3),Math.pow(10,6),Math.pow(10,9),Math.pow(10,12)],x=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"],E=["bit","kilobit","megabit","gigabit","terabit"];function S(t,e,n){const{scaled:i,scaleIndex:o}=R(t,e,M,n);return{scaled:i,unit:x[o]}}function j(t,e,n){const{scaled:i,scaleIndex:o}=R(t,e,N,n);return{scaled:i,unit:E[o]}}function A(t,e){const{scaled:n,scaleIndex:i}=k(t,M,e);return{scaled:n,unit:x[i]}}function P(t,e){const{scaled:n,scaleIndex:i}=k(t,N,e);return{scaled:n,unit:E[i]}}function R(t,e,n,i,o=!1){let{whole:r,negative:a,decimal:l}=t;const c=BigInt(r),u=n.length;let m=-1;for(let t=0;t<u&&c>=BigInt(n[t]);t++,m++);let d=3*(m+1),g=s({whole:r,decimal:l},-d),h=v({whole:g.whole,decimal:g.decimal,negative:a},e(g.decimal.length),i.roundingMode);return m<u-1&&BigInt(h.whole)===BigInt(n[m])&&(m++,d+=3,g=s({whole:r,decimal:l},-d),h=v({whole:g.whole,decimal:g.decimal,negative:a},e(g.decimal.length),i.roundingMode)),g={whole:o?(BigInt(h.whole)*BigInt(Math.pow(10,d))).toString():h.whole,decimal:h.decimal},{scaled:g,scaleIndex:m+1}}function k(t,e,n){const i=new Intl.NumberFormat("en-US",{minimumFractionDigits:n.minimumFractionDigits,maximumFractionDigits:n.maximumFractionDigits,useGrouping:!1});i.roundingMode=f(n);const o=e.length;let r=-1;for(let n=0;n<o&&t>=e[n];n++,r++);let a=-3*(r+1),s=t*Math.pow(10,a),l=parseFloat(i.format(s));return r<o-1&&l===e[r]&&(r++,a-=3,s=t*Math.pow(10,a)),{scaled:s,scaleIndex:r+1}}t.BigDecimalStringConverter=class{constructor(t){var n;this.locale=null!==(n=t.locale)&&void 0!==n?n:e.getLocale(),this.options=null!=t?t:{style:"decimal"}}format(t){if("string"!=typeof t)throw new Error("the value must be a string");const e=a(t),{native:n,resolved:i}=this._getResolvedAndNativeOptions();switch(i.style){case"decimal":case"currency":const t="compact"===n.notation?"compact":null;return this._format(e,n,t);case"percent":return this._format(e,n,"percent");case"unit":return this._format(e,n,i.unit)}}parse(t){return y(t,this.resolvedOptions(),this.locale)}resolvedOptions(){return this._getResolvedAndNativeOptions().resolved}getHint(){return null}_format(t,e={},n){let i=e;const o=this.resolvedOptions(),{minimumFractionDigits:r,maximumFractionDigits:a}=o;function l(t){return Math.min(Math.max(r,t),a)}let{decimal:c,whole:u,negative:m}=t;if("compact"===n){const{scaled:e}=function(t,e,n){return R(t,e,_,n,!0)}(t,l,o);u=e.whole,c=e.decimal}else if("percent"===n){const e=function(t,e,n){let{whole:i,negative:o,decimal:r}=t;const a=s({whole:i,decimal:r},2);return v({whole:a.whole,decimal:a.decimal,negative:o},n(a.decimal.length),e.roundingMode)}(t,o,l);u=e.whole,c=e.decimal}else if("byte"===n||"bit"===n){const e="byte"===n?S:j,{scaled:r,unit:a}=e(t,l,o);u=r.whole,c=r.decimal,i=Object.assign(Object.assign({},i),{unit:a})}else{const t=l(c.length);if(t<c.length){const e=v({negative:m,decimal:c,whole:u},t,o.roundingMode);u=e.whole,c=e.decimal}}return u=u||"0","percent"!==n?this._stitchFractionOnly(u,c,m,r,i):this._stitchWholeAndFraction(u,c,m,r,i)}_stitchFractionOnly(t,e,n,i,o={}){const r=this.options,a=Object.assign(Object.assign({},o),{minimumIntegerDigits:r.minimumIntegerDigits,minimumFractionDigits:i});a.useGrouping=r.useGrouping;let s="0"===t?0:BigInt(t);if(n&&(s=-s),e){a.minimumFractionDigits=1;const t=this._formatToPartsWithCustomSeparators(new Intl.NumberFormat(this.locale,a),s),n=this._getFractionPart(e,i),o={useGrouping:!1,minimumIntegerDigits:e.length},r=new Intl.NumberFormat(this.locale,o).format(BigInt(n));let l="";for(let e of t)"fraction"===e.type?l+=r:l+=e.value;return l}return this._formatWithCustomSeparators(new Intl.NumberFormat(this.locale,a),s)}_stitchWholeAndFraction(t,e,n,i,o={}){const r=this.options,a=e.length,s=a>0||i>0,l=Object.assign(Object.assign({},o),{useGrouping:!1,minimumFractionDigits:s?Math.max(i,1):0}),c=this._formatToPartsWithCustomSeparators(new Intl.NumberFormat(this.locale,l),n?-1:1),u={minimumIntegerDigits:r.minimumIntegerDigits};u.useGrouping=r.useGrouping;const m=this._formatWithCustomSeparators(new Intl.NumberFormat(this.locale,u),BigInt(t));let d;if(a>0){const t=this._getFractionPart(e,i),n={useGrouping:!1,minimumIntegerDigits:a>0?a:void 0};d=new Intl.NumberFormat(this.locale,n).format(BigInt(t))}let g="";for(let t of c){const e=t.type;g+="fraction"===e?null!=d?d:t.value:"integer"===e?m:t.value}return g}_formatWithCustomSeparators(t,e){var n,i,o,r;const a=null===(i=null===(n=this.options)||void 0===n?void 0:n.separators)||void 0===i?void 0:i.decimal,s=null===(r=null===(o=this.options)||void 0===o?void 0:o.separators)||void 0===r?void 0:r.group;if(void 0===a&&void 0===s)return t.format(e);const l=t.formatToParts(e);let c="";for(let t of l)"group"===t.type?c+=null!=s?s:t.value:"decimal"===t.type?c+=null!=a?a:t.value:c+=t.value;return c}_formatToPartsWithCustomSeparators(t,e){var n,i,o,r;const a=null===(i=null===(n=this.options)||void 0===n?void 0:n.separators)||void 0===i?void 0:i.decimal,s=null===(r=null===(o=this.options)||void 0===o?void 0:o.separators)||void 0===r?void 0:r.group;if(void 0===a&&void 0===s)return t.formatToParts(e);return t.formatToParts(e).map(t=>"group"===t.type?Object.assign(Object.assign({},t),{value:null!=s?s:t.value}):"decimal"===t.type?Object.assign(Object.assign({},t),{value:null!=a?a:t.value}):t)}_getFractionPart(t,e){const n=e-t.length;return n>0&&t.length>0?t+"0".repeat(n):t}_getResolvedAndNativeOptions(){return this.cachedResolvedAndNativeOptions||(this.cachedResolvedAndNativeOptions=D(this.options,this.locale)),this.cachedResolvedAndNativeOptions}},t.NumberConverter=class{constructor(t){var n;this.options=null!=t?t:{style:"decimal"},this.locale=null!==(n=this.options.locale)&&void 0!==n?n:e.getLocale()}format(t){var e,n;let i=t;if("number"!=typeof i)throw new Error("the value must be a number");const{resolved:o,native:r}=this._getResolvedAndNativeOptions(),a=this.options,s=Object.assign(Object.assign({},r),{minimumIntegerDigits:a.minimumIntegerDigits,minimumFractionDigits:a.minimumFractionDigits,maximumFractionDigits:a.maximumFractionDigits,useGrouping:a.useGrouping,roundingMode:f(o)});if("unit"===o.style){const e="bit"===o.unit?P:A,{scaled:n,unit:r}=e(t,a);i=n,s.unit=r}const l=new Intl.NumberFormat(this.locale,s);if(a.separators){const t=null===(e=null==a?void 0:a.separators)||void 0===e?void 0:e.decimal,o=null===(n=null==a?void 0:a.separators)||void 0===n?void 0:n.group;if(void 0===t&&void 0===o)return l.format(i);return l.formatToParts(i).reduce((e,n)=>"group"===n.type?e+(null!=o?o:n.value):"decimal"===n.type?e+(null!=t?t:n.value):e+n.value,"")}return l.format(i)}parse(t){return new Number(y(t,this.resolvedOptions(),this.locale)).valueOf()}resolvedOptions(){return this._getResolvedAndNativeOptions().resolved}getHint(){return null}_getResolvedAndNativeOptions(){return this.cachedResolvedAndNativeOptions||(this.cachedResolvedAndNativeOptions=D(this.options,this.locale)),this.cachedResolvedAndNativeOptions}},t.USER_INPUT_ERROR="userInput",Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojconverter-nativenumber.js.map