{"version":3,"file":"Menu.spec.js","sources":["../../../../src/UNSAFE_Menu/__tests__/Menu.spec.tsx"],"sourcesContent":["import { ComponentProps } from 'preact';\nimport { useRef } from 'preact/hooks';\nimport { render, fireEvent, waitFor } from '@testing-library/preact';\nimport userEvent from '@testing-library/user-event';\n\nimport { expect } from 'chai';\nimport { spy } from 'sinon';\n\nimport { RootEnvironmentProvider } from '../../UNSAFE_Environment';\nimport { Button } from '../../UNSAFE_Button';\nimport { getClientHints } from '../../utils/PRIVATE_clientHints';\n\nimport { Menu } from '../Menu';\nimport { MenuItem } from '../MenuItem';\nimport { MenuDivider } from '../MenuDivider';\nimport {\n  setObserverConfig,\n  getMenuItemByRole,\n  getAllMenuItemsByRole,\n  getLabel\n} from './menuTestsUtils';\n\nconst MenuSimpleComponent = ({\n  onClose,\n  initialFocus = 'menu'\n}: {\n  onClose?: ComponentProps<typeof Menu>['onClose'];\n  initialFocus?: 'menu' | 'firstItem';\n}) => {\n  const ref = useRef<HTMLButtonElement>(null);\n  return (\n    <RootEnvironmentProvider>\n      <Button ref={ref} label=\"Press me\"></Button>\n      <Menu\n        isOpen={true}\n        anchorRef={ref}\n        accessibleLabel=\"Test menu\"\n        onClose={onClose}\n        initialFocus={initialFocus}>\n        <MenuItem label=\"MenuItem1\"></MenuItem>\n        <MenuItem label=\"MenuItem2\"></MenuItem>\n        <MenuDivider></MenuDivider>\n        <MenuItem label=\"MenuItem3\"></MenuItem>\n        <MenuItem label=\"MenuItem4\"></MenuItem>\n      </Menu>\n    </RootEnvironmentProvider>\n  );\n};\n\nfunction getActiveElementKey() {\n  return (document.activeElement as HTMLElement)?.dataset['ojMenuItemKey'];\n}\n\ndescribe('Test Menu Component', () => {\n  const { deviceType, hoverSupport } = getClientHints();\n\n  const isHybrid = hoverSupport === 'events';\n  const isMobile = deviceType === 'phone';\n\n  const expectedMenuItemClassesLengthOnFocus = isHybrid ? 3 : 4;\n  beforeEach(() => {\n    setObserverConfig();\n  });\n\n  it('Menu container render correctly', async function () {\n    const content = render(<MenuSimpleComponent />);\n\n    const menu = getMenuItemByRole(content, 'menu');\n    const menuItems = getAllMenuItemsByRole(content, 'menuitem');\n    const separators = getAllMenuItemsByRole(content, 'separator');\n\n    expect(menu).not.null;\n    expect(menu.classList.length).equals(2);\n    expect(menu.getAttribute('aria-label')).equals('Test menu');\n\n    expect(menuItems.length).equals(4);\n    expect(separators.length).equals(1);\n  });\n\n  it('onClose called when Escape or Tab are pressed', async function () {\n    const onActionDummyFunction = spy();\n    const content = render(<MenuSimpleComponent onClose={onActionDummyFunction} />);\n    const menu = getMenuItemByRole(content, 'menu');\n\n    expect(menu).not.null;\n    if (!isMobile) {\n      fireEvent.keyDown(menu, { key: 'Tab' });\n      fireEvent.keyDown(menu, { key: 'Escape' });\n      expect(onActionDummyFunction.calledTwice).to.be.true;\n    }\n  });\n\n  it('onClose called when clicking outside', async function () {\n    const onActionDummyFunction = spy();\n    const content = render(<MenuSimpleComponent onClose={onActionDummyFunction} />);\n\n    const menu = getMenuItemByRole(content, 'menu');\n    const button = getLabel(content, 'Press me');\n\n    expect(menu).not.null;\n\n    if (isMobile) {\n      const modalWrapper = menu.parentElement?.parentElement;\n      if (modalWrapper) {\n        userEvent.click(modalWrapper);\n      }\n    } else {\n      userEvent.click(button);\n    }\n    expect(onActionDummyFunction.called).to.be.true;\n  });\n\n  it('onClose called when item was clicked', async function () {\n    const onActionDummyFunction = spy();\n    const content = render(<MenuSimpleComponent onClose={onActionDummyFunction} />);\n    const menu = getMenuItemByRole(content, 'menu');\n    const menuItems = getAllMenuItemsByRole(content, 'menuitem');\n    const menuItem = menuItems[0];\n\n    expect(menu).not.null;\n    fireEvent.click(menuItem);\n    expect(onActionDummyFunction.called).to.be.true;\n  });\n\n  it('onClose called when swipe is done (mobile)', async function () {\n    const onActionDummyFunction = spy();\n    const content = render(<MenuSimpleComponent onClose={onActionDummyFunction} />);\n    const menu = getMenuItemByRole(content, 'menu');\n    expect(menu).not.null;\n\n    if (typeof jest === 'undefined') {\n      if (isMobile) {\n        const menuWrapper = menu.parentElement;\n        // Touch objects are created so we can replicate this in fake touch events\n        // This stuff is based on what useSwipe triggers and could change depending on the final decision\n        // on what events to trigger on useSwipe.\n        const touch1 = new Touch({\n          target: menuWrapper as EventTarget,\n          identifier: 0,\n          pageX: 386,\n          pageY: 224\n        });\n        const touch2 = new Touch({\n          target: menuWrapper as EventTarget,\n          identifier: 0,\n          pageX: 389,\n          pageY: 397\n        });\n        if (menuWrapper) {\n          fireEvent.touchStart(menuWrapper, {\n            timeStamp: 10406,\n            currentTarget: menuWrapper,\n            changedTouches: [touch1]\n          });\n          fireEvent.touchEnd(menuWrapper, {\n            timeStamp: 10472,\n            currentTarget: menuWrapper,\n            changedTouches: [touch2]\n          });\n        }\n        expect(onActionDummyFunction.called).to.be.true;\n      }\n    }\n  });\n\n  it('Focus when item is clicked', async function () {\n    const content = render(<MenuSimpleComponent />);\n\n    const menu = getMenuItemByRole(content, 'menu');\n    const menuItems = getAllMenuItemsByRole(content, 'menuitem');\n    const thirdItemKey = menuItems[2].dataset['ojMenuItemKey'];\n\n    expect(menu).not.null;\n\n    if (typeof jest !== 'undefined') {\n      await waitFor(\n        () => {\n          expect(document.activeElement as HTMLElement).equals(menu);\n        },\n        { timeout: 100 }\n      );\n      userEvent.click(menuItems[2]);\n      expect(getActiveElementKey()).equals(thirdItemKey);\n      expect(menuItems[2].classList.length).equals(expectedMenuItemClassesLengthOnFocus - 1);\n    }\n  });\n  it('Focus on firstItem when initialFocus is set as firstItem', async function () {\n    const content = render(<MenuSimpleComponent initialFocus=\"firstItem\" />);\n\n    const menu = getMenuItemByRole(content, 'menu');\n    const menuItems = getAllMenuItemsByRole(content, 'menuitem');\n\n    const firstItemKey = menuItems[0].dataset['ojMenuItemKey'];\n\n    expect(menu).not.null;\n    //TO DO: See how we can have stable tests on Karma/Mocha\n    if (typeof jest !== 'undefined') {\n      expect(getActiveElementKey()).equals(firstItemKey);\n      expect(menuItems[0].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n    }\n  });\n\n  it('Menu Keyboard navigation - focus', async function () {\n    const content = render(<MenuSimpleComponent />);\n\n    const menu = getMenuItemByRole(content, 'menu');\n    const menuItems = getAllMenuItemsByRole(content, 'menuitem');\n\n    const firstItemKey = menuItems[0].dataset['ojMenuItemKey'];\n    const secondItemKey = menuItems[1].dataset['ojMenuItemKey'];\n    const thirdItemKey = menuItems[2].dataset['ojMenuItemKey'];\n    const fourthItemKey = menuItems[3].dataset['ojMenuItemKey'];\n\n    expect(menu).not.null;\n\n    if (typeof jest !== 'undefined') {\n      await waitFor(\n        () => {\n          expect(document.activeElement as HTMLElement).equals(menu);\n        },\n        { timeout: 100 }\n      );\n\n      fireEvent.keyDown(menu, { key: 'ArrowDown' });\n      expect(getActiveElementKey()).equals(firstItemKey);\n      expect(menuItems[0].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n\n      fireEvent.keyDown(menu, { key: 'ArrowDown' });\n      expect(getActiveElementKey()).equals(secondItemKey);\n      expect(menuItems[1].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n\n      fireEvent.keyDown(menu, { key: 'ArrowDown' });\n      expect(getActiveElementKey()).equals(thirdItemKey);\n      expect(menuItems[2].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n\n      fireEvent.keyDown(menu, { key: 'ArrowDown' });\n      expect(getActiveElementKey()).equals(fourthItemKey);\n      expect(menuItems[3].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n\n      fireEvent.keyDown(menu, { key: 'ArrowDown' });\n      expect(getActiveElementKey()).equals(firstItemKey);\n      expect(menuItems[0].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n\n      fireEvent.keyDown(menu, { key: 'ArrowUp' });\n      expect(getActiveElementKey()).equals(fourthItemKey);\n      expect(menuItems[3].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n    }\n  });\n  it('Menu Keyboard navigation - focus with Home and End', async function () {\n    const content = render(<MenuSimpleComponent />);\n\n    const menu = getMenuItemByRole(content, 'menu');\n    const menuItems = getAllMenuItemsByRole(content, 'menuitem');\n\n    const firstItemKey = menuItems[0].dataset['ojMenuItemKey'];\n    const fourthItemKey = menuItems[3].dataset['ojMenuItemKey'];\n\n    expect(menu).not.null;\n    if (typeof jest !== 'undefined') {\n      await waitFor(\n        () => {\n          expect(document.activeElement as HTMLElement).equals(menu);\n        },\n        { timeout: 100 }\n      );\n\n      fireEvent.keyDown(menu, { key: 'End' });\n      expect(getActiveElementKey()).equals(fourthItemKey);\n      expect(menuItems[3].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n\n      fireEvent.keyDown(menu, { key: 'Home' });\n      expect(getActiveElementKey()).equals(firstItemKey);\n      expect(menuItems[0].classList.length).equals(expectedMenuItemClassesLengthOnFocus);\n    }\n  });\n});\n"],"names":["useRef","_jsxs","RootEnvironmentProvider","_jsx","Button","Menu","MenuItem","MenuDivider","getClientHints","setObserverConfig","render","getMenuItemByRole","getAllMenuItemsByRole","expect","spy","fireEvent","getLabel","userEvent","waitFor"],"mappings":"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"}