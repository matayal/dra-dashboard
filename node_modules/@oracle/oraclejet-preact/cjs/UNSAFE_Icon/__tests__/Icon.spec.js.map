{"version":3,"file":"Icon.spec.js","sources":["../../../../src/UNSAFE_Icon/__tests__/Icon.spec.tsx"],"sourcesContent":["import { render, waitFor } from '@testing-library/preact';\nimport { expect } from 'chai';\nimport { Icon } from '../Icon';\nimport { RootEnvironmentProvider } from '../../UNSAFE_Environment';\nimport userEvent from '@testing-library/user-event';\nimport { getClientHints } from '../../utils/PRIVATE_clientHints';\n\nconst TOOLTIP_TEXT = 'IconTooltip';\nconst TOOLTIP_TEST_TIMEOUT = 5000;\n\ndescribe('Test Icon component', () => {\n  it('render', async function () {\n    const content = render(\n      <Icon>\n        <path d=\"M 0 0 H 24 V 24 H 0 L 0 0\" />\n      </Icon>\n    );\n    const svg = content.container.querySelector('svg');\n    expect(svg).not.null;\n    const path = content.container.querySelector('path');\n    expect(path).not.null;\n  });\n  it('icon size', async function () {\n    const content = render(\n      <Icon size=\"8x\">\n        <path d=\"M 0 0 H 24 V 24 H 0 L 0 0\" />\n      </Icon>\n    );\n    const firstElement = content.container.firstElementChild;\n    // @ts-ignore\n    const classList = firstElement.classList;\n    expect(classList.length).equals(1);\n  });\n  it('icon color', async function () {\n    const content = render(\n      <Icon color=\"danger\">\n        <path d=\"M 0 0 H 24 V 24 H 0 L 0 0\" />\n      </Icon>\n    );\n    const firstElement = content.container.firstElementChild as HTMLElement;\n    // @ts-ignore\n    const classList = firstElement.classList;\n    expect(classList.length).equals(1);\n  });\n});\n\ndescribe('Mouse Interaction', () => {\n  const clientHints = getClientHints();\n  if (typeof jest === 'undefined' && clientHints.browser === 'chrome') {\n    mocha.timeout(2 * TOOLTIP_TEST_TIMEOUT);\n    it(\n      'check tooltip correctly triggered with mouse interaction',\n      async () => {\n        const content = render(\n          <RootEnvironmentProvider>\n            <Icon accessibleLabel={TOOLTIP_TEXT}>\n              <path d=\"M 0 0 H 24 V 24 H 0 L 0 0\" />\n            </Icon>\n          </RootEnvironmentProvider>\n        );\n        const IconElement = content.container.firstElementChild as HTMLElement;\n        userEvent.hover(IconElement);\n        await waitFor(() => checkTooltipText(TOOLTIP_TEXT), {\n          timeout: TOOLTIP_TEST_TIMEOUT\n        });\n      },\n      TOOLTIP_TEST_TIMEOUT\n    );\n  }\n});\n\ndescribe('Keyboard Interaction', () => {\n  const clientHints = getClientHints();\n  if (typeof jest === 'undefined' && clientHints.browser === 'chrome') {\n    mocha.timeout(2 * TOOLTIP_TEST_TIMEOUT);\n    it(\n      'check tooltip correctly triggered with keyboard interaction',\n      async () => {\n        const content = render(\n          <RootEnvironmentProvider>\n            <Icon accessibleLabel={TOOLTIP_TEXT}>\n              <path d=\"M 0 0 H 24 V 24 H 0 L 0 0\" />\n            </Icon>\n          </RootEnvironmentProvider>\n        );\n        (content.container.firstElementChild as HTMLElement).focus();\n        userEvent.tab();\n        await waitFor(() => checkTooltipText(TOOLTIP_TEXT), {\n          timeout: TOOLTIP_TEST_TIMEOUT\n        });\n      },\n      TOOLTIP_TEST_TIMEOUT\n    );\n  }\n});\n\nconst checkTooltipText = (content: string) => {\n  const targetElements = document.querySelectorAll('[role=\"tooltip\"]');\n  const targetElementItem = targetElements.item(0) as HTMLElement;\n  const tooltipContainer = targetElementItem?.firstElementChild as HTMLElement;\n  expect(tooltipContainer?.style.opacity).not.equals('');\n  expect(tooltipContainer?.style.opacity).not.equals('0');\n  expect(tooltipContainer?.style.maxHeight).not.equals('');\n  expect(tooltipContainer?.style.maxHeight).not.equals('0');\n  const innerHTML = tooltipContainer?.firstElementChild?.innerHTML;\n  expect(innerHTML).equals(content);\n};\n"],"names":["render","_jsx","Icon","expect","clientHints","getClientHints","RootEnvironmentProvider","userEvent","waitFor"],"mappings":"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"}