{"version":3,"file":"PRIVATE_useCurrentKey.js","sources":["../../../src/hooks/PRIVATE_useCurrentKey/useCurrentKey.ts","../../../src/hooks/PRIVATE_useCurrentKey/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { useCallback } from 'preact/hooks';\nimport { isKeyDefined } from '../../utils/UNSAFE_keys';\nimport { CurrentKeyDetail } from '../../UNSAFE_Collection';\n\n/**\n * Hook for handling current key update due to user interaction including keyboard navigation.\n * This can be reuse by all Collection components.\n *\n * @param keyExtractor function to extract the key based on the provided element\n * @param getPrevKey function to get the previous key based on the current key\n * @param getNextKey function to get the next key based on the current key\n * @param currentKey the current key\n * @param onCurrentChange function to invoke if the current key has changed\n * @returns\n */\nexport function useCurrentKey<K>(\n  keyExtractor: (element: HTMLElement) => K | null,\n  getPrevKey: () => K | null,\n  getNextKey: () => K | null,\n  currentKey?: K,\n  onChange?: (detail: CurrentKeyDetail<K>) => void\n) {\n  const onKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (onChange && isKeyDefined(currentKey)) {\n        // TODO: support horizontal layout (left/right arrow key)\n        if (event.key === 'ArrowDown' && !event.shiftKey) {\n          const nextKey = getNextKey();\n          if (isKeyDefined(nextKey) && currentKey != nextKey) {\n            onChange({ value: nextKey as K });\n          }\n          event.preventDefault();\n        } else if (event.key === 'ArrowUp' && !event.shiftKey) {\n          const prevKey = getPrevKey();\n          if (isKeyDefined(prevKey) && currentKey != prevKey) {\n            onChange({ value: prevKey as K });\n          }\n          event.preventDefault();\n        }\n      }\n    },\n    [currentKey, getNextKey, getPrevKey, onChange]\n  );\n\n  const onClick = useCallback(\n    (event: MouseEvent) => {\n      if (onChange && !event.shiftKey) {\n        const nextKey = keyExtractor(event.target as HTMLElement);\n        if (isKeyDefined(nextKey) && currentKey != nextKey) {\n          onChange({ value: nextKey as K });\n          event.stopPropagation();\n        }\n      }\n    },\n    [currentKey, keyExtractor, onChange]\n  );\n\n  const currentKeyProps = onChange == null ? {} : { onClick, onKeyDown };\n  return { currentKeyProps };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nexport { useCurrentKey } from './useCurrentKey';\n"],"names":["useCallback","isKeyDefined"],"mappings":";;;;;;;;AAAA;;;;;;AAMG;AAKH;;;;;;;;;;AAUG;AACG,SAAU,aAAa,CAC3B,YAAgD,EAChD,UAA0B,EAC1B,UAA0B,EAC1B,UAAc,EACd,QAAgD,EAAA;AAEhD,IAAA,MAAM,SAAS,GAAGA,iBAAW,CAC3B,CAAC,KAAoB,KAAI;AACvB,QAAA,IAAI,QAAQ,IAAIC,8BAAY,CAAC,UAAU,CAAC,EAAE;;YAExC,IAAI,KAAK,CAAC,GAAG,KAAK,WAAW,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;AAChD,gBAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAC;gBAC7B,IAAIA,8BAAY,CAAC,OAAO,CAAC,IAAI,UAAU,IAAI,OAAO,EAAE;AAClD,oBAAA,QAAQ,CAAC,EAAE,KAAK,EAAE,OAAY,EAAE,CAAC,CAAC;AACnC,iBAAA;gBACD,KAAK,CAAC,cAAc,EAAE,CAAC;AACxB,aAAA;iBAAM,IAAI,KAAK,CAAC,GAAG,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;AACrD,gBAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAC;gBAC7B,IAAIA,8BAAY,CAAC,OAAO,CAAC,IAAI,UAAU,IAAI,OAAO,EAAE;AAClD,oBAAA,QAAQ,CAAC,EAAE,KAAK,EAAE,OAAY,EAAE,CAAC,CAAC;AACnC,iBAAA;gBACD,KAAK,CAAC,cAAc,EAAE,CAAC;AACxB,aAAA;AACF,SAAA;KACF,EACD,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,CAAC,CAC/C,CAAC;AAEF,IAAA,MAAM,OAAO,GAAGD,iBAAW,CACzB,CAAC,KAAiB,KAAI;AACpB,QAAA,IAAI,QAAQ,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YAC/B,MAAM,OAAO,GAAG,YAAY,CAAC,KAAK,CAAC,MAAqB,CAAC,CAAC;YAC1D,IAAIC,8BAAY,CAAC,OAAO,CAAC,IAAI,UAAU,IAAI,OAAO,EAAE;AAClD,gBAAA,QAAQ,CAAC,EAAE,KAAK,EAAE,OAAY,EAAE,CAAC,CAAC;gBAClC,KAAK,CAAC,eAAe,EAAE,CAAC;AACzB,aAAA;AACF,SAAA;KACF,EACD,CAAC,UAAU,EAAE,YAAY,EAAE,QAAQ,CAAC,CACrC,CAAC;AAEF,IAAA,MAAM,eAAe,GAAG,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC;IACvE,OAAO,EAAE,eAAe,EAAE,CAAC;AAC7B;;AClEA;;;;;;AAMG;;;;;;;"}