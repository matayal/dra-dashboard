{"version":3,"file":"ComponentMessage.spec.js","sources":["../../../../src/UNSAFE_ComponentMessage/__tests__/ComponentMessage.spec.tsx"],"sourcesContent":["import { render } from '@testing-library/preact';\nimport { expect } from 'chai';\nimport { severities } from '../../PRIVATE_Message';\nimport type { RootEnvironment } from '../../UNSAFE_Environment';\nimport { RootEnvironmentProvider } from '../../UNSAFE_Environment';\nimport { matchTranslationBundle } from '../../utils/UNSAFE_matchTranslationBundle';\nimport type { ComponentMessageItem } from '../ComponentMessage';\nimport { ComponentMessage } from '../ComponentMessage';\n\nasync function getEnvironmentContext() {\n  const locale = matchTranslationBundle(['en'], new Set(['en-US', 'en']));\n  const { default: translations } = await import(`../../resources/nls/${locale}/bundle.ts`);\n  return {\n    translations: { '@oracle/oraclejet-preact': translations }\n  } as Partial<RootEnvironment>;\n}\n\ndescribe('Test ComponentMessage component', () => {\n  for (const severity of severities) {\n    if (severity === 'none') {\n      continue;\n    }\n\n    it(`severity ${severity}`, async () => {\n      const content = render(\n        <RootEnvironmentProvider environment={await getEnvironmentContext()}>\n          <ComponentMessage\n            severity={severity as ComponentMessageItem['severity']}\n            detail={`${severity} message`}\n          />\n        </RootEnvironmentProvider>\n      );\n\n      const message = content.container.firstElementChild;\n      expect(message, 'component is rendered').not.null;\n      expect(\n        message?.classList.contains(`oj-c-messageinline-${severity}`),\n        'correct style class is set'\n      ).to.be.true;\n\n      const icon = message?.children.item(0);\n      const detail = message?.children.item(1);\n\n      expect(message?.children.length).to.equal(2, 'correct child DOM nodes count');\n      expect(icon, 'icon exists').not.null;\n      expect(detail, 'detail exists').not.null;\n\n      expect(detail?.textContent?.trim()).to.equal(\n        `${severity} message`,\n        'detail rendered correctly'\n      );\n    });\n  }\n});\n"],"names":["matchTranslationBundle","severities","render","_jsx","RootEnvironmentProvider","ComponentMessage","expect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,eAAe,qBAAqB,GAAA;AAClC,IAAA,MAAM,MAAM,GAAGA,0DAAsB,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AACxE,IAAA,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,GAAG,MAAM,iCAAM,CAAC,CAAA,oBAAA,EAAuB,MAAM,CAAA,UAAA,CAAY,CAAC,CAAC;IAC1F,OAAO;AACL,QAAA,YAAY,EAAE,EAAE,0BAA0B,EAAE,YAAY,EAAE;KAC/B,CAAC;AAChC,CAAC;AAED,QAAQ,CAAC,iCAAiC,EAAE,MAAK;AAC/C,IAAA,KAAK,MAAM,QAAQ,IAAIC,wBAAU,EAAE;QACjC,IAAI,QAAQ,KAAK,MAAM,EAAE;YACvB,SAAS;AACV,SAAA;AAED,QAAA,EAAE,CAAC,CAAY,SAAA,EAAA,QAAQ,EAAE,EAAE,YAAW;;AACpC,YAAA,MAAM,OAAO,GAAGC,aAAM,CACpBC,cAAC,CAAAC,0CAAuB,EAAC,MAAA,CAAA,MAAA,CAAA,EAAA,WAAW,EAAE,MAAM,qBAAqB,EAAE,EACjE,EAAA,EAAA,QAAA,EAAAD,cAAA,CAACE,iCAAgB,EAAA,EACf,QAAQ,EAAE,QAA4C,EACtD,MAAM,EAAE,CAAG,EAAA,QAAQ,CAAU,QAAA,CAAA,EAAA,CAC7B,EACsB,CAAA,CAAA,CAC3B,CAAC;AAEF,YAAA,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC;YACpDC,WAAM,CAAC,OAAO,EAAE,uBAAuB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;YAClDA,WAAM,CACJ,OAAO,KAAA,IAAA,IAAP,OAAO,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAP,OAAO,CAAE,SAAS,CAAC,QAAQ,CAAC,CAAA,mBAAA,EAAsB,QAAQ,CAAE,CAAA,CAAC,EAC7D,4BAA4B,CAC7B,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC;AAEb,YAAA,MAAM,IAAI,GAAG,OAAO,KAAA,IAAA,IAAP,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACvC,YAAA,MAAM,MAAM,GAAG,OAAO,KAAA,IAAA,IAAP,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAEzCA,WAAM,CAAC,OAAO,KAAP,IAAA,IAAA,OAAO,uBAAP,OAAO,CAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,+BAA+B,CAAC,CAAC;YAC9EA,WAAM,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;YACrCA,WAAM,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;YAEzCA,WAAM,CAAC,CAAA,EAAA,GAAA,MAAM,KAAN,IAAA,IAAA,MAAM,uBAAN,MAAM,CAAE,WAAW,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAC1C,CAAA,EAAG,QAAQ,CAAU,QAAA,CAAA,EACrB,2BAA2B,CAC5B,CAAC;AACJ,SAAC,CAAC,CAAC;AACJ,KAAA;AACH,CAAC,CAAC;;;;;"}