{"version":3,"file":"ComponentMessageContainer.spec.js","sources":["../../../../src/UNSAFE_ComponentMessage/__tests__/ComponentMessageContainer.spec.tsx"],"sourcesContent":["import { render } from '@testing-library/preact';\nimport { expect } from 'chai';\nimport { ComponentMessageContainer } from '../ComponentMessageContainer';\nimport type { ComponentMessageItem } from '../ComponentMessage';\nimport type { RootEnvironment } from '../../UNSAFE_Environment';\nimport { RootEnvironmentProvider } from '../../UNSAFE_Environment';\nimport { matchTranslationBundle } from '../../utils/UNSAFE_matchTranslationBundle';\n\nasync function getEnvironmentContext() {\n  const locale = matchTranslationBundle(['en'], new Set(['en-US', 'en']));\n  const { default: translations } = await import(`../../resources/nls/${locale}/bundle.ts`);\n  return {\n    translations: { '@oracle/oraclejet-preact': translations }\n  } as Partial<RootEnvironment>;\n}\n\ndescribe('Test ComponentMessageContainer component', () => {\n  it('should render messages correctly', async () => {\n    const messages: ComponentMessageItem[] = [\n      { detail: 'error message', severity: 'error' },\n      { detail: 'warning message', severity: 'warning' },\n      { detail: 'confirmation message', severity: 'confirmation' },\n      { detail: 'info message', severity: 'info' }\n    ];\n    const { container } = render(\n      <RootEnvironmentProvider environment={await getEnvironmentContext()}>\n        <ComponentMessageContainer messages={messages} />\n      </RootEnvironmentProvider>\n    );\n    const messagesContainer = container.firstElementChild;\n\n    expect(messagesContainer?.children.length).to.equal(4, 'all messages are rendered');\n\n    const error = messagesContainer?.children?.item(0)?.firstElementChild;\n    const warning = messagesContainer?.children?.item(1)?.firstElementChild;\n    const confirmation = messagesContainer?.children?.item(2)?.firstElementChild;\n    const info = messagesContainer?.children?.item(3)?.firstElementChild;\n\n    expect(error?.classList.contains('oj-c-messageinline-error'), 'has correct error class').to.be\n      .true;\n    expect(error?.textContent).to.equal('error message', 'has correct error detail text');\n\n    expect(warning?.classList.contains('oj-c-messageinline-warning'), 'has correct warning class')\n      .to.be.true;\n    expect(warning?.textContent).to.equal('warning message', 'has correct warning detail text');\n\n    expect(\n      confirmation?.classList.contains('oj-c-messageinline-confirmation'),\n      'has correct confirmation class'\n    ).to.be.true;\n    expect(confirmation?.textContent).to.equal(\n      'confirmation message',\n      'has correct confirmation detail text'\n    );\n\n    expect(info?.classList.contains('oj-c-messageinline-info'), 'has correct info class').to.be\n      .true;\n    expect(info?.textContent).to.equal('info message', 'has correct info detail text');\n  });\n});\n"],"names":["matchTranslationBundle","render","_jsx","RootEnvironmentProvider","ComponentMessageContainer","expect"],"mappings":"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"}