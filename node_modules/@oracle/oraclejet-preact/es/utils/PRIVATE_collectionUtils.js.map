{"version":3,"file":"PRIVATE_collectionUtils.js","sources":["../../../src/utils/PRIVATE_collectionUtils/collectionUtils.ts"],"sourcesContent":["import { isKeyDefined } from '../UNSAFE_keys';\n\n/**\n * Returns the key from the item element\n */\nconst getKey = (item: HTMLElement) => {\n  return item.dataset['ojKeyType'] === 'number'\n    ? Number(item.dataset['ojKey'])\n    : item.dataset['ojKey'];\n};\n\n/**\n * A helper function that return the key of the first available item.\n */\nexport const getFirstVisibleKey = (root: HTMLElement, itemSelector: string) => {\n  if (root) {\n    const firstItem = root.querySelector(itemSelector);\n    if (firstItem) {\n      const key = getKey(firstItem as HTMLElement);\n      return key;\n    }\n  }\n  return null;\n};\n\n/**\n * A helper function to find the element with the specified key.\n * Returns null if the element with key is not found.\n */\nexport const findElementByKey = <K extends string | number>(\n  root: HTMLElement,\n  key: K,\n  itemSelector: string\n) => {\n  if (root) {\n    const items = root.querySelectorAll(itemSelector);\n    for (let i = 0; i < items.length; i++) {\n      const thisKey = getKey(items[i] as HTMLElement);\n      if (key == (thisKey as K)) {\n        return items[i];\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * A helper function that returns the key of the previous or the next item\n * given the specified current key\n */\nexport const getPrevNextKey = <K extends string | number>(\n  root: HTMLElement | null,\n  currentKey: K | undefined,\n  isPrev: boolean,\n  itemSelector: string\n) => {\n  return (): K | null => {\n    if (isKeyDefined(currentKey) && root) {\n      const currItem = findElementByKey(root, currentKey as K, itemSelector);\n      if (currItem) {\n        const nextItem = isPrev ? currItem.previousElementSibling : currItem.nextElementSibling;\n        if (nextItem) {\n          const key = getKey(nextItem as HTMLElement) as K;\n          if (key != null) {\n            return key;\n          }\n        }\n      }\n      return getFirstVisibleKey(root, itemSelector) as K;\n    }\n    return null;\n  };\n};\n\n/**\n * A helper function to get the key from an element\n */\nexport const keyExtractor = <K extends string | number>(\n  element: HTMLElement,\n  itemSelector: string\n): K | null => {\n  const item = element.closest(itemSelector);\n  if (item) {\n    const key = getKey(item as HTMLElement) as K;\n    return key === undefined ? null : key;\n  }\n  return null;\n};\n"],"names":[],"mappings":";;;AAEA;;AAEG;AACH,MAAM,MAAM,GAAG,CAAC,IAAiB,KAAI;AACnC,IAAA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,QAAQ;UACzC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC/B,UAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC5B,CAAC,CAAC;AAEF;;AAEG;MACU,kBAAkB,GAAG,CAAC,IAAiB,EAAE,YAAoB,KAAI;AAC5E,IAAA,IAAI,IAAI,EAAE;QACR,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;AACnD,QAAA,IAAI,SAAS,EAAE;AACb,YAAA,MAAM,GAAG,GAAG,MAAM,CAAC,SAAwB,CAAC,CAAC;AAC7C,YAAA,OAAO,GAAG,CAAC;AACZ,SAAA;AACF,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd,EAAE;AAEF;;;AAGG;AACU,MAAA,gBAAgB,GAAG,CAC9B,IAAiB,EACjB,GAAM,EACN,YAAoB,KAClB;AACF,IAAA,IAAI,IAAI,EAAE;QACR,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC;AAClD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,MAAM,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAgB,CAAC,CAAC;YAChD,IAAI,GAAG,IAAK,OAAa,EAAE;AACzB,gBAAA,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;AACjB,aAAA;AACF,SAAA;AACF,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd,EAAE;AAEF;;;AAGG;AACI,MAAM,cAAc,GAAG,CAC5B,IAAwB,EACxB,UAAyB,EACzB,MAAe,EACf,YAAoB,KAClB;AACF,IAAA,OAAO,MAAe;AACpB,QAAA,IAAI,YAAY,CAAC,UAAU,CAAC,IAAI,IAAI,EAAE;YACpC,MAAM,QAAQ,GAAG,gBAAgB,CAAC,IAAI,EAAE,UAAe,EAAE,YAAY,CAAC,CAAC;AACvE,YAAA,IAAI,QAAQ,EAAE;AACZ,gBAAA,MAAM,QAAQ,GAAG,MAAM,GAAG,QAAQ,CAAC,sBAAsB,GAAG,QAAQ,CAAC,kBAAkB,CAAC;AACxF,gBAAA,IAAI,QAAQ,EAAE;AACZ,oBAAA,MAAM,GAAG,GAAG,MAAM,CAAC,QAAuB,CAAM,CAAC;oBACjD,IAAI,GAAG,IAAI,IAAI,EAAE;AACf,wBAAA,OAAO,GAAG,CAAC;AACZ,qBAAA;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,kBAAkB,CAAC,IAAI,EAAE,YAAY,CAAM,CAAC;AACpD,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;AACd,KAAC,CAAC;AACJ,EAAE;AAEF;;AAEG;MACU,YAAY,GAAG,CAC1B,OAAoB,EACpB,YAAoB,KACR;IACZ,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AAC3C,IAAA,IAAI,IAAI,EAAE;AACR,QAAA,MAAM,GAAG,GAAG,MAAM,CAAC,IAAmB,CAAM,CAAC;QAC7C,OAAO,GAAG,KAAK,SAAS,GAAG,IAAI,GAAG,GAAG,CAAC;AACvC,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd;;;;;;;"}