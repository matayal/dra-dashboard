{"version":3,"file":"PRIVATE_SelectCommon.js","sources":["../../src/PRIVATE_SelectCommon/itemTextUtils.ts","../../src/PRIVATE_SelectCommon/DefaultList.tsx","../../src/PRIVATE_SelectCommon/eventUtils.ts","../../src/PRIVATE_SelectCommon/useOutsideMousedown.ts","../../src/PRIVATE_SelectCommon/Dropdown.tsx","../../src/PRIVATE_SelectCommon/DropdownArrow.tsx","../../src/PRIVATE_SelectCommon/DropdownList.tsx","../../src/PRIVATE_SelectCommon/DropdownUserAssistance.tsx","../../src/PRIVATE_SelectCommon/EmptyResults.tsx","../../src/PRIVATE_SelectCommon/selectUtils.ts","../../src/PRIVATE_SelectCommon/useSelectCommon.ts","../../src/PRIVATE_SelectCommon/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { Logger } from '../utils/UNSAFE_logger';\nimport { ItemTextFunctionType, ItemTextType } from '../utils/UNSAFE_selectUtils';\n\nexport function renderItemText<K, D>(item: Item<K, D>, itemText: ItemTextType<K, D>) {\n  // if item-text is a string and the data has the specified field, return it;\n  // otherwise log an error\n  if (typeof itemText === 'string') {\n    if ((item.data as any)?.hasOwnProperty(itemText)) {\n      const retData = item.data[itemText];\n      return String(retData);\n    }\n    Logger.error('SelectMultiple: itemText specifies field that does not exist: ' + itemText);\n    // return undefined if the field doesn't exist\n    return undefined;\n  }\n  // if item-text is a function, call it to create a display label\n  return (itemText as ItemTextFunctionType<K, D>)(item);\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentProps } from 'preact';\nimport { useCallback, useMemo } from 'preact/hooks';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport {\n  CurrentKeyDetail,\n  DataState,\n  ItemActionDetail,\n  ListItemContext,\n  SelectionDetail\n} from '../UNSAFE_Collection';\nimport { HighlightText } from '../UNSAFE_HighlightText';\nimport { List, SkeletonContainer } from '../PRIVATE_List';\nimport { Flex } from '../UNSAFE_Flex';\nimport { Skeleton } from '../UNSAFE_Skeleton';\nimport { Keys } from '../utils/UNSAFE_keys';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { renderItemText } from './itemTextUtils';\n\nconst itemStyles = cssProps`${{\n  paddingBottom: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)',\n  paddingLeft: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)',\n  paddingRight: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)',\n  paddingTop: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)'\n}}`;\n\ntype PickedPropsFromList = Pick<\n  ComponentProps<typeof List>,\n  'accessibleSummary' | 'currentItemVariant' | 'selectionMode'\n>;\n\ntype Props<K extends string | number, D extends Record<string, any>> = PickedPropsFromList & {\n  itemText: ItemTextType<K, D>;\n  // props from List that we constrain or unconstrain\n  currentKey?: K;\n  data?: DataState<K, D> | null;\n  onCurrentKeyChange?: (detail: CurrentKeyDetail<K>) => void;\n  onItemAction?: (detail: ItemActionDetail<K, D>) => void;\n  onLoadRange?: ComponentProps<typeof List>['onLoadRange'];\n  onSelectionChange?: (detail: SelectionDetail<K>) => void;\n  searchText?: string;\n  selectedKeys?: Set<K>;\n};\n\nconst noOp = () => {};\n\nexport function DefaultList<K extends string | number, D extends Record<string, any>>({\n  accessibleSummary,\n  currentItemVariant,\n  currentKey,\n  data,\n  itemText,\n  onCurrentKeyChange,\n  onItemAction,\n  onLoadRange = noOp,\n  onSelectionChange,\n  searchText,\n  selectedKeys,\n  selectionMode\n}: Props<K, D>) {\n  const listItemRenderer = useCallback(\n    (listItemContext: ListItemContext<K, D>) => {\n      const itemContext = {\n        data: listItemContext.data,\n        key: listItemContext.metadata.key,\n        metadata: listItemContext.metadata\n      };\n      const renderedItemText = renderItemText(itemContext, itemText) as string;\n      return (\n        <Flex>\n          {listItemContext.selector && listItemContext.selector()}\n          <div class={itemStyles}>\n            <HighlightText matchText={searchText}>{renderedItemText}</HighlightText>\n          </div>\n        </Flex>\n      );\n    },\n    [itemText, searchText]\n  );\n\n  const keys = useMemo(() => {\n    return { all: false, keys: selectedKeys ?? new Set<K>() };\n  }, [selectedKeys]) as Keys<K>;\n\n  return (\n    <List<K, D>\n      accessibleSummary={accessibleSummary}\n      allowTabbableMode={false}\n      currentItemVariant={currentItemVariant}\n      currentKey={currentKey}\n      data={data ?? null}\n      loadingIndicator={loadingIndicator}\n      onCurrentKeyChange={onCurrentKeyChange}\n      onItemAction={onItemAction}\n      onLoadRange={onLoadRange}\n      onSelectionChange={onSelectionChange}\n      role=\"listbox\"\n      selectedKeys={keys}\n      selectionMode={selectionMode}>\n      {(context: ListItemContext<K, D>) => listItemRenderer(context)}\n    </List>\n  );\n}\n\n/**\n * Custom 3 Skeleton loader for select multiple\n * TODO: to remove this once https://jira.oraclecorp.com/jira/browse/JET-51527 is solved\n */\nconst loadingIndicator = (\n  <SkeletonContainer minimumCount={3}>\n    {() => {\n      return (\n        <Flex height=\"12x\" align=\"center\">\n          <Skeleton height=\"4x\" />\n        </Flex>\n      );\n    }}\n  </SkeletonContainer>\n);\n","export const KEYS = {\n  TAB: 'Tab',\n  ENTER: 'Enter',\n  ESC: 'Escape',\n  SPACE: 'Space',\n  LEFT: 'ArrowLeft',\n  UP: 'ArrowUp',\n  RIGHT: 'ArrowRight',\n  DOWN: 'ArrowDown',\n  SHIFT_LEFT: 'ShiftLeft',\n  SHIFT_RIGHT: 'ShiftRight',\n  CTRL_LEFT: 'ControlLeft',\n  CTRL_RIGHT: 'ControlRight',\n  ALT_LEFT: 'AltLeft',\n  ALT_RIGHT: 'AltRight',\n  PAGE_UP: 'PageUp',\n  PAGE_DOWN: 'PageDown',\n  HOME: 'Home',\n  END: 'End',\n  BACKSPACE: 'Backspace',\n  DELETE: 'Delete'\n};\n\nexport const isControlKey = (event: KeyboardEvent) => {\n  switch (event.code) {\n    case KEYS.SHIFT_LEFT:\n    case KEYS.SHIFT_RIGHT:\n    case KEYS.CTRL_LEFT:\n    case KEYS.CTRL_RIGHT:\n    case KEYS.ALT_LEFT:\n    case KEYS.ALT_RIGHT:\n      return true;\n    default:\n      return event.metaKey || event.ctrlKey;\n  }\n};\n\nexport const isFunctionKey = (event: KeyboardEvent) => {\n  return /\\bF([1-9]|1[0-2])\\b/i.test(event.code);\n};\n\nexport const isControlOrFunctionKey = (event: KeyboardEvent) => {\n  return isControlKey(event) || isFunctionKey(event);\n};\n\nexport const isSimpleClick = (event: MouseEvent) => {\n  return event.button === 0 && !event.ctrlKey;\n};\n\nexport const preventDefaultForCurrentTarget = (event: MouseEvent) => {\n  if (event.currentTarget === event.target) {\n    event.preventDefault();\n  }\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * `useOutsideMousedown` hook for capturing mousedown outside of an element\n */\nimport { RefObject } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport { coerceArray } from '../utils/UNSAFE_arrayUtils';\n\ntype Props = {\n  /**\n   * If true outside mousedown is disabled\n   */\n  isDisabled?: boolean;\n  /**\n   * Reference to element or array of elements relative to which outside mousedown is performed\n   */\n  ref: RefObject<HTMLElement> | RefObject<HTMLElement>[];\n  /**\n   * Outside mousedown callback\n   */\n  handler?: (event: MouseEvent) => void;\n};\n\nconst isPointOutside = (event: Event, ref: RefObject<HTMLElement>[]) => {\n  const target = event.target as HTMLElement;\n  if (target) {\n    const doc = getDocument(target);\n    if (!doc.contains(target)) return false;\n  }\n  return ref.every((elRef) => !elRef.current?.contains(target));\n};\n\nconst getDocument = (node?: Node): Document => node?.ownerDocument ?? document;\n\nexport const useOutsideMousedown = ({ isDisabled: disabled = false, ref, handler }: Props) => {\n  useEffect(() => {\n    const refs = coerceArray(ref);\n    if (\n      !handler ||\n      disabled ||\n      (refs.length > 0 && refs.findIndex((elRef) => elRef.current === null) > -1)\n    )\n      return;\n\n    const onMouseDown = (event: MouseEvent) => {\n      if (isPointOutside(event, refs)) {\n        handler?.(event);\n      }\n    };\n    const firstElRef = refs[0];\n    const doc = getDocument(firstElRef.current!);\n    if (doc) {\n      doc.addEventListener('mousedown', onMouseDown, true);\n\n      return () => {\n        doc.removeEventListener('mousedown', onMouseDown, true);\n      };\n    }\n    return undefined;\n  }, [disabled, handler, ref]);\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren, ComponentProps } from 'preact';\nimport { MutableRef, useCallback, useEffect, useState } from 'preact/hooks';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport { Floating, PositionData } from '../UNSAFE_Floating';\nimport { Layer } from '../UNSAFE_Layer';\nimport { isControlOrFunctionKey, KEYS, preventDefaultForCurrentTarget } from './eventUtils';\nimport { useOutsideMousedown } from './useOutsideMousedown';\n\nconst rootStyles = {\n  base: cssProps`${{\n    boxSizing: 'border-box',\n    backgroundColor: 'var(--oj-c-PRIVATE-DO-NOT-USE-popup-bg-color)',\n    border: '1px solid var(--oj-c-PRIVATE-DO-NOT-USE-popup-border-color)',\n    borderRadius: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-border-radius-md)',\n    boxShadow: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-dropdown-box-shadow)',\n    maxHeight: 'inherit',\n    display: 'flex',\n    flexDirection: 'column'\n  }}`\n};\n\ntype FloatingProps = ComponentProps<typeof Floating>;\n\ntype Props = {\n  anchorRef: MutableRef<HTMLElement | null>;\n  children?: ComponentChildren;\n  dropdownRef: MutableRef<HTMLElement | null>;\n  id?: string;\n  isOpen?: boolean;\n  onAutoDismiss?: (event?: Event) => void;\n  onPosition?: FloatingProps['onPosition'];\n};\n\nconst DEFAULT_PLACEMENT = 'bottom-start';\n\nexport function Dropdown({\n  anchorRef,\n  children,\n  dropdownRef,\n  id,\n  isOpen,\n  onAutoDismiss,\n  onPosition\n}: Props) {\n  const [placement, setPlacement] = useState<FloatingProps['placement']>(DEFAULT_PLACEMENT);\n\n  useEffect(() => {\n    // reset the placement to the default when the dropdown closes, not opens, so that it doesn't\n    // initially open in the previous position and then move to the default position on the\n    // rerender after the state is updated\n    if (!isOpen) {\n      setPlacement(DEFAULT_PLACEMENT);\n    }\n  }, [isOpen, setPlacement]);\n\n  const handlePosition = useCallback(\n    (positionData: PositionData) => {\n      // update the placement so that the dropdown stays where it is until there is a collision,\n      // i.e. it no longer fits, instead of letting it try to move back to the default position\n      // on every render\n      setPlacement(positionData.placement);\n\n      // call the callback that was passed in through props\n      onPosition?.(positionData);\n    },\n    [onPosition, setPlacement]\n  );\n\n  const handleAutoDismiss = useCallback(\n    (event: Event) => {\n      onAutoDismiss?.(event);\n    },\n    [onAutoDismiss]\n  );\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.defaultPrevented || isControlOrFunctionKey(event)) {\n        return;\n      }\n\n      switch (event.code) {\n        case KEYS.ESC:\n        case KEYS.TAB:\n          handleAutoDismiss(event);\n          break;\n      }\n    },\n    [handleAutoDismiss]\n  );\n\n  // use the mousedown event to be consistent with legacy JET and so that we're hiding the dropdown\n  // on the same event where focus will transfer\n  useOutsideMousedown({\n    isDisabled: !isOpen,\n    ref: [anchorRef, dropdownRef],\n    handler: handleAutoDismiss\n  });\n\n  // TODO: get dropdown y (mainAxis) offset from --oj-c-PRIVATE-DO-NOT-USE-private-core-global-dropdown-offset\n  const offsetValue = { mainAxis: 4, crossAxis: 0 };\n\n  const inlineStyle = {\n    minWidth: `${anchorRef.current?.offsetWidth}px`\n  };\n\n  return !isOpen ? null : (\n    <Layer logicalParentRef={anchorRef}>\n      <Floating\n        anchorRef={anchorRef}\n        sizeOptions={{\n          isMaxHeightAdjusted: true,\n          maxHeightCeiling: 400\n        }}\n        ref={dropdownRef}\n        placement={placement}\n        offsetValue={offsetValue}\n        onPosition={handlePosition}>\n        <div\n          class={rootStyles.base}\n          id={id}\n          style={inlineStyle}\n          onKeyDown={handleKeyDown}\n          onMouseDown={preventDefaultForCurrentTarget}>\n          {children}\n        </div>\n      </Floating>\n    </Layer>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useCallback } from 'preact/hooks';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport { usePress } from '../hooks/UNSAFE_usePress';\nimport { DropdownArrowIcon } from '../UNSAFE_ThemedIcons';\nimport { classNames } from '../utils/UNSAFE_classNames';\n\ntype Props = {\n  isDisabled?: boolean;\n  onClick?: () => void;\n  size?: 'md' | 'sm';\n};\n\n// TODO: replace this with var(--oj-button-height) once it is available\nconst ojButtonHeight = '2.75rem';\n// TODO: replace this with var(--oj-button-sm-height) once it is available\nconst ojButtonSmHeight = '2.25rem';\n// TODO: replace this with var(--oj-button-border-radius) once it is available\nconst ojButtonBorderRadius = 'var(--oj-c-PRIVATE-DO-NOT-USE-core-border-radius-md)';\n// TODO: replace this with var(--oj-button-borderless-chrome-text-color) once it is available\nconst ojButtonBorderlessChromeTextColor = 'var(--oj-c-PRIVATE-DO-NOT-USE-core-text-color-primary)';\n// TODO: replace this with var (--oj-button-borderless-chrome-text-color-disabled) once it is available\nconst ojButtonBorderlessChromeTextColorDisabled =\n  'var(--oj-c-PRIVATE-DO-NOT-USE-core-text-color-disabled)';\n// TODO: replace this with var(--oj-button-borderless-chrome-text-color-hover) once it is available\nconst ojButtonBorderlessChromeTextColorHover =\n  'var(--oj-c-PRIVATE-DO-NOT-USE-core-text-color-primary)';\n// TODO: replace this with var(--oj-button-borderless-chrome-bg-color-hover) once it is available\nconst ojButtonBorderlessChromeBgColorHover = 'var(--oj-c-PRIVATE-DO-NOT-USE-core-bg-color-hover)';\n// TODO: replace this with var(--oj-button-borderless-chrome-border-color-hover) once it is available\nconst ojButtonBorderlessChromeBorderColorHover = 'transparent';\n// TODO: replace this with var(--oj-c-PRIVATE-DO-NOT-USE-button-icon-size) once it is available\nconst ojButtonIconSize = 'var(--oj-c-PRIVATE-DO-NOT-USE-core-icon-size-lg)';\n\nconst rootStyles = {\n  base: cssProps`${{\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n\n    paddingInline: 0,\n    paddingBlock: 0,\n    borderRadius: ojButtonBorderRadius,\n    color: ojButtonBorderlessChromeTextColor,\n    fontSize: ojButtonIconSize\n  }}`,\n\n  sizeMd: cssProps`${{\n    width: ojButtonHeight,\n    height: ojButtonHeight,\n    lineHeight: ojButtonHeight\n  }}`,\n\n  sizeSm: cssProps`${{\n    width: ojButtonSmHeight,\n    height: ojButtonSmHeight,\n    lineHeight: ojButtonSmHeight\n  }}`,\n\n  enabled: cssProps`${{\n    cursor: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-cursor-clickable)',\n\n    '&:hover': {\n      color: ojButtonBorderlessChromeTextColorHover,\n      backgroundColor: ojButtonBorderlessChromeBgColorHover,\n      borderColor: ojButtonBorderlessChromeBorderColorHover\n    }\n  }}`,\n\n  disabled: cssProps`${{\n    color: ojButtonBorderlessChromeTextColorDisabled\n  }}`\n};\n\nconst noop = () => {};\n\nexport function DropdownArrow({ isDisabled = false, onClick, size = 'md' }: Props) {\n  const preventDefault = useCallback((event: Event) => {\n    event.preventDefault();\n  }, []);\n  const { pressProps } = usePress(onClick ?? noop, { isDisabled });\n\n  const styleClasses = classNames([\n    rootStyles.base,\n    size === 'sm' ? rootStyles.sizeSm : rootStyles.sizeMd,\n    isDisabled ? rootStyles.disabled : rootStyles.enabled\n  ]);\n\n  return (\n    <span\n      aria-hidden=\"true\"\n      class={styleClasses}\n      tabIndex={-1}\n      onMouseDown={preventDefault}\n      {...pressProps}>\n      <DropdownArrowIcon />\n    </span>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren } from 'preact';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { preventDefaultForCurrentTarget } from './eventUtils';\n\nconst rootStyles = {\n  base: cssProps`${{\n    paddingLeft: '0',\n    paddingRight: '0',\n    margin: '1px 0 2px 0',\n    position: 'relative',\n    overflowX: 'hidden',\n    overflowY: 'auto',\n    // '-webkit-tap-highlight-color': 'transparent',\n    boxSizing: 'border-box',\n\n    display: 'flex',\n    flexDirection: 'column'\n  }}`,\n\n  // TODO: These should really be applied directly to the child ListView so that the content\n  // displays under the padding when scrolled, but we can't apply styles to the child collection.\n  // TODO: Also need to figure out how to determine whether the collection is a ListView (in\n  // the collectionRenderer case) in order to apply this styling.\n  topGap: cssProps`${{\n    paddingTop: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-2x)'\n  }}`,\n  bottomGap: cssProps`${{\n    paddingBottom: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-2x)'\n  }}`,\n\n  loading: cssProps`${{\n    minHeight: 'calc(10 * var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-4x))'\n  }}`\n};\n\ntype Props = {\n  children?: ComponentChildren;\n  hasBottomGap?: boolean;\n  isLoading?: boolean;\n};\n\nexport function DropdownList({ children, hasBottomGap = true, isLoading = false }: Props) {\n  const styleClasses = classNames([\n    rootStyles.base,\n    rootStyles.topGap,\n    hasBottomGap && rootStyles.bottomGap,\n    isLoading && rootStyles.loading\n  ]);\n  return (\n    <div class={styleClasses} onMouseDown={preventDefaultForCurrentTarget}>\n      {children}\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentProps } from 'preact';\nimport { useCallback } from 'preact/hooks';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport { FormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { InlineUserAssistance } from '../UNSAFE_UserAssistance';\n\ntype InlineUserAssistanceProps = Pick<\n  ComponentProps<typeof InlineUserAssistance>,\n  'assistiveText' | 'fieldLabel' | 'helpSourceLink' | 'helpSourceText' | 'userAssistanceDensity'\n>;\n\nconst rootStyles = cssProps`${{\n  borderTopColor: 'rgba(var(--oj-c-PRIVATE-DO-NOT-USE-palette-neutral-rgb-190), 0.1)',\n  borderTopStyle: 'solid',\n  borderTopWidth: '1px',\n  paddingBottom: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-2x)',\n  paddingLeft: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-2x)',\n  paddingRight: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-2x)',\n  paddingTop: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-2x)'\n}}`;\n\nexport function DropdownUserAssistance(props: InlineUserAssistanceProps) {\n  // Prevent the focus from transferring when the user clicks on an empty/non-clickable area\n  // of the user assistance\n  const handleMouseDown = useCallback((event: MouseEvent) => {\n    // Don't call preventDefault when the user clicks on the help source link, so that the\n    // focus is allowed to transfer in that case.\n    if ((event.target as Element)?.tagName !== 'A') {\n      event.preventDefault();\n    }\n  }, []);\n\n  return (\n    <FormFieldContext.Provider value={{ isFocused: true }}>\n      <div class={rootStyles} onMouseDown={handleMouseDown}>\n        <InlineUserAssistance {...props} />\n      </div>\n    </FormFieldContext.Provider>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { preventDefaultForCurrentTarget } from './eventUtils';\n\nconst rootStyles = cssProps`${{\n  paddingBottom: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)',\n  paddingLeft: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)',\n  paddingRight: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)',\n  paddingTop: 'var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)'\n}}`;\n\nexport function EmptyResults() {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  // TODO: figure out whether we need a separate resource string for this message;\n  // (JET-53984 - Preact Select* components: empty results message)\n\n  // call preventDefault for mousedown on this div so that focus does not transfer from\n  // the input\n  return (\n    <div class={rootStyles} onMouseDown={preventDefaultForCurrentTarget}>\n      {translations.select_noMatchesFound()}\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { DataState } from '../UNSAFE_Collection';\n\n/**\n * Helper function to determine whether the current device is a mobile device\n * @returns true if running on a mobile device, false otherwise\n */\nexport function isMobile() {\n  const deviceType = getClientHints().deviceType;\n  return deviceType === 'phone' || deviceType === 'tablet';\n}\n\nexport function isBeforeDataFetch<K, D>(data: DataState<K, D>) {\n  return data.sizePrecision === 'atLeast' && data.totalSize === 0;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { MutableRef, useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport { CurrentKeyDetail, DataState } from '../UNSAFE_Collection';\nimport { PositionData } from '../UNSAFE_Floating';\nimport { ValueUpdateDetail } from '../utils/UNSAFE_valueUpdateDetail';\nimport { isControlOrFunctionKey, isSimpleClick, KEYS } from './eventUtils';\n\ntype UseSelectCommonProps<K, D> = {\n  data?: DataState<K, D> | null;\n  inputRef: MutableRef<HTMLInputElement>;\n  isFocused?: boolean;\n  onFilter?: ({ searchText }: { searchText?: string }) => void;\n};\n\n/**\n * Hook that manages state and behavior for a Select* component.  This hook creates state\n * variables and event listeners, returning properties to apply to components internally\n * rendered by a Select* component, as well as state information.\n *\n * @param data Specifies data for the dropdown list.\n * @param inputRef Ref to the input element.\n * @param isFocused Specifies whether the component has focus.\n * @param onFilter Callback function to trigger loading data for the dropdown list,\n * which may or may not be filtered by user entered text.\n *\n * @returns Component state and event listeners.\n */\nexport function useSelectCommon<K, D>({\n  data,\n  inputRef,\n  isFocused,\n  onFilter\n}: UseSelectCommonProps<K, D>) {\n  const mainFieldRef = useRef<HTMLDivElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const [isDropdownOpen, setDropdownOpen] = useState(false);\n  const [isDropdownAbove, setDropdownAbove] = useState(false);\n  const [currentRow, setCurrentRow] = useState<{ rowKey?: K }>({\n    rowKey: undefined\n  });\n  const [selectedKeys, setSelectedKeys] = useState<Set<K>>();\n  const [isUserFiltering, setUserFiltering] = useState(false);\n  const [userInput, setUserInput] = useState<string>();\n  const [searchText, setSearchText] = useState<string>();\n\n  const onMouseDown = useCallback(\n    (event: MouseEvent) => {\n      // const target = event.target as HTMLElement;\n      if (event.defaultPrevented || !isSimpleClick(event)) {\n        return;\n      }\n      if (!isDropdownOpen) {\n        setDropdownOpen(true);\n      }\n      // this is needed to focus the input when clicking on the inside label when there is no\n      // value;  otherwise the component looks focused but doesn't actually have physical focus\n      setTimeout(function () {\n        inputRef.current?.focus();\n      }, 0);\n    },\n    [isDropdownOpen]\n  );\n\n  const handleDropdownArrowClick = useCallback(() => {\n    setDropdownOpen(!isDropdownOpen);\n\n    // focus the input so that if the user Tabs afterwards, it loses focus and the dropdown closes\n    inputRef.current?.focus();\n  }, [isDropdownOpen]);\n\n  const handleDropdownAutoDismiss = useCallback(\n    (event?: Event) => {\n      if (isDropdownOpen) {\n        setDropdownOpen(false);\n\n        switch (event?.type) {\n          case 'keydown':\n            const keyboardEvent = event as KeyboardEvent;\n            switch (keyboardEvent.code) {\n              case KEYS.ESC:\n                // focus the input when the user cancels out of the dropdown\n                inputRef.current?.focus();\n                break;\n              default:\n                break;\n            }\n            break;\n          case 'mousedown':\n            // if focus is in the dropdown, focus the input before the dropdown is hidden so that\n            // focus will transfer correctly when the target is not focusable;\n            // otherwise the text cursor appears in the input again\n            if (dropdownRef.current?.contains(document.activeElement)) {\n              inputRef.current?.focus();\n            }\n            break;\n          default:\n            break;\n        }\n      }\n    },\n    [isDropdownOpen]\n  );\n\n  const handleDropdownPosition = useCallback((data: PositionData) => {\n    setDropdownAbove(data.placement.startsWith('top'));\n  }, []);\n\n  const handleUpDownArrowKeys = useCallback(\n    (event: KeyboardEvent) => {\n      if (!isDropdownOpen) {\n        setDropdownOpen(true);\n      } else {\n        // transfer physical focus into the dropdown\n        const firstFocusableElem = dropdownRef.current?.querySelector('[tabindex=\"0\"]');\n        (firstFocusableElem as HTMLElement)?.focus();\n\n        // if there is no current item set, make the first item current\n        if (data !== undefined && currentRow.rowKey === undefined) {\n          setCurrentRow({ rowKey: data?.data?.[0]?.metadata?.key });\n        }\n      }\n\n      // prevent the page from scrolling\n      event.preventDefault();\n    },\n    [currentRow, data, isDropdownOpen]\n  );\n\n  const handleMainFieldKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      // const target = event.target as HTMLElement;\n      // ignore control key and function key\n      if (isControlOrFunctionKey(event)) {\n        return;\n      }\n\n      switch (event.code) {\n        case KEYS.PAGE_UP:\n        case KEYS.PAGE_DOWN:\n          // prevent the page from scrolling\n          event.preventDefault();\n\n          return;\n\n        case KEYS.UP:\n        case KEYS.DOWN:\n          // prevent the page from scrolling\n          event.preventDefault();\n          break;\n\n        case KEYS.ESC:\n          if (isDropdownOpen) {\n            setDropdownOpen(false);\n\n            event.preventDefault();\n\n            // JET-53183 - core pack compat: stop propagation of handled events\n            // we don't want a parent collection component to stop editing the row when we close\n            // the dropdown\n            event.stopPropagation();\n          }\n          break;\n\n        default:\n          break;\n      }\n    },\n    [isDropdownOpen]\n  );\n\n  const handleMainFieldKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      // ignore control key and function key\n      if (isControlOrFunctionKey(event)) {\n        return;\n      }\n\n      switch (event.code) {\n        case KEYS.UP:\n        case KEYS.DOWN:\n          handleUpDownArrowKeys(event);\n          break;\n\n        default:\n          break;\n      }\n    },\n    [handleUpDownArrowKeys]\n  );\n\n  const handleInput = useCallback(\n    (detail: ValueUpdateDetail<string>) => {\n      if (!isDropdownOpen) {\n        setDropdownOpen(true);\n      }\n      setUserFiltering(true);\n      setUserInput(detail.value);\n      const str = detail.value?.trim();\n      setSearchText(str);\n      onFilter?.({ searchText: str });\n    },\n    [isDropdownOpen, onFilter]\n  );\n\n  const onCurrentKeyChange = useCallback((detail: CurrentKeyDetail<K>) => {\n    setCurrentRow({ rowKey: detail.value });\n  }, []);\n\n  const stopFiltering = useCallback(() => {\n    setUserFiltering(false);\n    setUserInput('');\n    setSearchText('');\n  }, []);\n\n  // the user is not actively filtering if the dropdown is closed and the component doesn't\n  // have focus\n  useEffect(() => {\n    if (!isDropdownOpen && !isFocused && isUserFiltering) {\n      stopFiltering();\n    }\n  }, [isDropdownOpen, isFocused, isUserFiltering]);\n\n  // need to call onFilter with undefined searchText when the dropdown opens and the\n  // user is NOT filtering\n  useEffect(() => {\n    if (isDropdownOpen && !isUserFiltering) {\n      onFilter?.({ searchText: undefined });\n    }\n  }, [isDropdownOpen, isUserFiltering, onFilter]);\n\n  // when the dropdown closes, reset the isDropdownAbove flag\n  useEffect(() => {\n    if (!isDropdownOpen) {\n      setDropdownAbove(false);\n    }\n  }, [isDropdownOpen]);\n\n  return {\n    currentRow,\n    dropdownRef,\n    handleDropdownArrowClick,\n    handleDropdownAutoDismiss,\n    handleDropdownPosition,\n    handleInput,\n    handleMainFieldKeyDown,\n    handleMainFieldKeyUp,\n    handleUpDownArrowKeys,\n    isDropdownAbove,\n    isDropdownOpen,\n    // the field should remain to look focused while the dropdown is open,\n    // in case physical focus is in the dropdown\n    isFocused: isFocused || isDropdownOpen,\n    isUserFiltering,\n    mainFieldRef,\n    onCurrentKeyChange,\n    onMouseDown,\n    searchText,\n    selectedKeys,\n    setCurrentRow,\n    setDropdownOpen,\n    setSelectedKeys,\n    stopFiltering,\n    userInput\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * PRIVATE Components not intended for outside use.\n */\nexport { DefaultList } from './DefaultList';\nexport { Dropdown } from './Dropdown';\nexport { DropdownArrow } from './DropdownArrow';\nexport { DropdownList } from './DropdownList';\nexport { DropdownUserAssistance } from './DropdownUserAssistance';\nexport { EmptyResults } from './EmptyResults';\nexport {\n  isControlKey,\n  isControlOrFunctionKey,\n  isFunctionKey,\n  isSimpleClick,\n  KEYS,\n  preventDefaultForCurrentTarget\n} from './eventUtils';\nexport { renderItemText } from './itemTextUtils';\nexport { isBeforeDataFetch, isMobile } from './selectUtils';\nexport { useSelectCommon } from './useSelectCommon';\n"],"names":["itemStyles","noOp","DefaultList","accessibleSummary","currentItemVariant","currentKey","data","itemText","onCurrentKeyChange","onItemAction","onLoadRange","onSelectionChange","searchText","selectedKeys","selectionMode","listItemRenderer","useCallback","listItemContext","itemContext","key","metadata","_jsxs","Flex","children","selector","_jsx","Object","assign","class","HighlightText","matchText","renderedItemText","keys","useMemo","all","Set","List","allowTabbableMode","loadingIndicator","role","context","SkeletonContainer","minimumCount","rootStyles","DEFAULT_PLACEMENT","Dropdown","anchorRef","dropdownRef","id","isOpen","onAutoDismiss","onPosition","setPlacement","handlePosition","positionData","placement","handleAutoDismiss","event","handleKeyDown","useOutsideMousedown","ref","handler","inlineStyle","isMaxHeightAdjusted","maxHeightCeiling","ojButtonHeight","ojButtonSmHeight","ojButtonBorderRadius","ojButtonBorderlessChromeTextColor","ojButtonBorderlessChromeTextColorDisabled","ojButtonBorderlessChromeTextColorHover","ojButtonBorderlessChromeBgColorHover","ojButtonBorderlessChromeBorderColorHover","ojButtonIconSize","noop","DropdownArrow","isDisabled","onClick","size","preventDefault","pressProps","usePress","base","sizeSm","sizeMd","DropdownList","hasBottomGap","isLoading","topGap","styleClasses","onMouseDown","preventDefaultForCurrentTarget","DropdownUserAssistance","props","handleMouseDown","FormFieldContext","Provider","value","isFocused","InlineUserAssistance","EmptyResults","translations","useTranslationBundle","select_noMatchesFound"],"mappings":"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"}