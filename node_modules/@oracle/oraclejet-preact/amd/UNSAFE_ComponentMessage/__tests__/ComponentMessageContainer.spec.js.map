{"version":3,"file":"ComponentMessageContainer.spec.js","sources":["../../../../src/UNSAFE_ComponentMessage/__tests__/ComponentMessageContainer.spec.tsx"],"sourcesContent":["import { render } from '@testing-library/preact';\nimport { expect } from 'chai';\nimport { ComponentMessageContainer } from '../ComponentMessageContainer';\nimport type { ComponentMessageItem } from '../ComponentMessage';\nimport type { RootEnvironment } from '../../UNSAFE_Environment';\nimport { RootEnvironmentProvider } from '../../UNSAFE_Environment';\nimport { matchTranslationBundle } from '../../utils/UNSAFE_matchTranslationBundle';\n\nasync function getEnvironmentContext() {\n  const locale = matchTranslationBundle(['en'], new Set(['en-US', 'en']));\n  const { default: translations } = await import(`../../resources/nls/${locale}/bundle.ts`);\n  return {\n    translations: { '@oracle/oraclejet-preact': translations }\n  } as Partial<RootEnvironment>;\n}\n\ndescribe('Test ComponentMessageContainer component', () => {\n  it('should render messages correctly', async () => {\n    const messages: ComponentMessageItem[] = [\n      { detail: 'error message', severity: 'error' },\n      { detail: 'warning message', severity: 'warning' },\n      { detail: 'confirmation message', severity: 'confirmation' },\n      { detail: 'info message', severity: 'info' }\n    ];\n    const { container } = render(\n      <RootEnvironmentProvider environment={await getEnvironmentContext()}>\n        <ComponentMessageContainer messages={messages} />\n      </RootEnvironmentProvider>\n    );\n    const messagesContainer = container.firstElementChild;\n\n    expect(messagesContainer?.children.length).to.equal(4, 'all messages are rendered');\n\n    const error = messagesContainer?.children?.item(0)?.firstElementChild;\n    const warning = messagesContainer?.children?.item(1)?.firstElementChild;\n    const confirmation = messagesContainer?.children?.item(2)?.firstElementChild;\n    const info = messagesContainer?.children?.item(3)?.firstElementChild;\n\n    expect(error?.classList.contains('oj-c-messageinline-error'), 'has correct error class').to.be\n      .true;\n    expect(error?.textContent).to.equal('error message', 'has correct error detail text');\n\n    expect(warning?.classList.contains('oj-c-messageinline-warning'), 'has correct warning class')\n      .to.be.true;\n    expect(warning?.textContent).to.equal('warning message', 'has correct warning detail text');\n\n    expect(\n      confirmation?.classList.contains('oj-c-messageinline-confirmation'),\n      'has correct confirmation class'\n    ).to.be.true;\n    expect(confirmation?.textContent).to.equal(\n      'confirmation message',\n      'has correct confirmation detail text'\n    );\n\n    expect(info?.classList.contains('oj-c-messageinline-info'), 'has correct info class').to.be\n      .true;\n    expect(info?.textContent).to.equal('info message', 'has correct info detail text');\n  });\n});\n"],"names":["async","getEnvironmentContext","locale","matchTranslationBundle","Set","default","translations","__variableDynamicImportRuntime0__","describe","it","container","render","_jsx","jsx","RootEnvironmentProvider","Object","assign","environment","children","ComponentMessageContainer","messages","detail","severity","messagesContainer","firstElementChild","expect","length","to","equal","error","_b","item","warning","_d","confirmation","_f","info","_h","classList","contains","be","true","textContent"],"mappings":"glFAQAA,eAAeC,KACb,MAAMC,EAASC,yBAAuB,CAAC,MAAO,IAAIC,IAAI,CAAC,QAAS,SACxDC,QAASC,q0KAAuBC,CAAO,uBAAuBL,eACtE,MAAO,CACLI,aAAc,CAAE,2BAA4BA,IAIhDE,SAAS,2CAA4C,KACnDC,GAAG,mCAAoCT,8BACrC,MAMMU,UAAEA,GAAcC,EAAAA,OACpBC,EAACC,IAAAC,EAAuBA,wBAACC,OAAAC,OAAA,CAAAC,kBAAmBhB,MAAuB,CAAAiB,SACjEN,EAACC,IAAAM,4BAA0B,CAAAC,SARU,CACvC,CAAEC,OAAQ,gBAAiBC,SAAU,SACrC,CAAED,OAAQ,kBAAmBC,SAAU,WACvC,CAAED,OAAQ,uBAAwBC,SAAU,gBAC5C,CAAED,OAAQ,eAAgBC,SAAU,eAOhCC,EAAoBb,EAAUc,kBAEpCC,EAAMA,OAACF,MAAAA,SAAAA,EAAmBL,SAASQ,QAAQC,GAAGC,MAAM,EAAG,6BAEvD,MAAMC,EAA4C,QAApCC,YAAAP,MAAAA,OAAA,EAAAA,EAAmBL,+BAAUa,KAAK,UAAE,IAAAD,OAAA,EAAAA,EAAEN,kBAC9CQ,EAA8C,QAApCC,YAAAV,MAAAA,OAAA,EAAAA,EAAmBL,+BAAUa,KAAK,UAAE,IAAAE,OAAA,EAAAA,EAAET,kBAChDU,EAAmD,QAApCC,YAAAZ,MAAAA,OAAA,EAAAA,EAAmBL,+BAAUa,KAAK,UAAE,IAAAI,OAAA,EAAAA,EAAEX,kBACrDY,EAA2C,QAApCC,YAAAd,MAAAA,OAAA,EAAAA,EAAmBL,+BAAUa,KAAK,UAAE,IAAAM,OAAA,EAAAA,EAAEb,kBAEnDC,EAAMA,OAACI,MAAAA,OAAA,EAAAA,EAAOS,UAAUC,SAAS,4BAA6B,2BAA2BZ,GAAGa,GACzFC,KACHhB,EAAAA,OAAOI,MAAAA,OAAA,EAAAA,EAAOa,aAAaf,GAAGC,MAAM,gBAAiB,iCAErDH,EAAAA,OAAOO,MAAAA,SAAAA,EAASM,UAAUC,SAAS,8BAA+B,6BAC/DZ,GAAGa,GAAGC,KACThB,EAAAA,OAAOO,MAAAA,OAAA,EAAAA,EAASU,aAAaf,GAAGC,MAAM,kBAAmB,mCAEzDH,EAAMA,OACJS,MAAAA,SAAAA,EAAcI,UAAUC,SAAS,mCACjC,kCACAZ,GAAGa,GAAGC,KACRhB,EAAAA,OAAOS,MAAAA,OAAA,EAAAA,EAAcQ,aAAaf,GAAGC,MACnC,uBACA,wCAGFH,EAAMA,OAACW,MAAAA,OAAA,EAAAA,EAAME,UAAUC,SAAS,2BAA4B,0BAA0BZ,GAAGa,GACtFC,KACHhB,EAAAA,OAAOW,MAAAA,OAAA,EAAAA,EAAMM,aAAaf,GAAGC,MAAM,eAAgB"}