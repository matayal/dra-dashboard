define(["exports","preact/hooks","preact/jsx-runtime","./UNSAFE_useId","../UNSAFE_Floating","../UNSAFE_Layer","./UNSAFE_useHover","./UNSAFE_useFocus","./UNSAFE_useTouch","../utils/UNSAFE_mergeProps","../utils/UNSAFE_arrayUtils","../tslib.es6-d8595453","./UNSAFE_useAnimation","css!./UNSAFE_useTooltip.css","../utils/UNSAFE_classNames","../useAnimation-72dcd02d","../classNames-b7cf3c05","../Floating-2dad3061","preact/compat","preact","./UNSAFE_useToggle","../index-8215ac99","./UNSAFE_useUser","../UNSAFE_Environment","../utils/PRIVATE_floatingUtils","../utils/PRIVATE_refUtils","./UNSAFE_useOutsideClick"],function(e,t,n,o,s,i,u,r,a,l,c,d,m,p,g,f,v,b,h,E,A,P,x,_,T,y,F){"use strict";const N="exwey6",S="_1cbf3q6",U="_1o7y3bd",R="_1d2cvbp",j=e=>{var{children:s,isOpen:i,isDatatip:u,onTransitionEnd:r}=e,a=d.__rest(e,["children","isOpen","isDatatip","onTransitionEnd"]);const l=o.useId(),c=t.useRef(null),m=t.useRef(null),{nodeRef:p}=f.useAnimation(i?"mounted":"unmounted",{animationStates:{mounted:e=>{const t=e.firstChild;return{from:{maxHeight:"0",opacity:"0%"},to:{maxHeight:`${null==t?void 0:t.offsetHeight}px`,opacity:u?"100%":"95%"},options:{duration:u?1:100,easing:[0,0,.2,1]}}},unmounted:e=>({from:{opacity:u?"100%":"95%"},to:{maxHeight:"0",opacity:"0%"},options:{duration:u?1:100,easing:[0,0,.2,1]}})},isAnimatedOnMount:!0,onAnimationEnd:()=>null==r?void 0:r()});return t.useEffect(()=>{var e,t;c.current&&(null===(e=m.current)||void 0===e?void 0:e.offsetHeight)&&(c.current.style.height=`${null===(t=m.current)||void 0===t?void 0:t.offsetHeight}px`)},[]),n.jsx("div",Object.assign({ref:c,id:l,role:"tooltip",class:N},{children:n.jsx("div",Object.assign({ref:p,class:v.classNames([S])},a,{children:n.jsx("div",Object.assign({ref:m,class:v.classNames([U,u?R:""])},{children:s}))}))}))},O=(c.stringLiteralArray(["start","top-start","top","top-end","end","bottom-end","bottom","bottom-start"]),c.stringLiteralArray(["element","pointer"]),({text:e,isOpen:s=!1,variant:c="tooltip",position:d="bottom",isDisabled:m=!1,anchor:p={x:"element",y:"element"},offset:g={mainAxis:0,crossAxis:0},onToggle:f})=>{const v=m||!e,h=t.useRef(!0),[E,A]=t.useState(!v&&s?"mounting":"unmounted"),[P,x]=t.useState(!1);x(!1);const _="datatip"===c,T=t.useRef(!0),{hoverProps:y,isHover:F}=u.useHover({}),{touchProps:N,isTouch:S}=a.useTouch({isDisabled:m}),{focusProps:U,isFocus:R}=r.useFocus({isDisabled:F||S}),{hoverProps:O,isHover:H}=u.useHover({isDisabled:m}),B="pointer"===p.x||"pointer"===p.y,L=o.useId(),k=t.useRef(null),C=t.useRef({x:0,y:0}),D=B&&!R?C:k,I=_?0:250,G=t.useRef(null),M=t.useRef(null),w=()=>{G.current&&clearTimeout(G.current)},V=t.useCallback(e=>{if(e)switch(E){case"unmounting":case"unmounted":A("mountPending");break;case"unmountPending":w(),A("mounted")}else switch(E){case"mounting":case"mounted":A("unmountPending");break;case"mountPending":w(),A("unmounted")}},[E]);t.useEffect(()=>{h.current?h.current=!1:A(s?"mounting":"unmounting")},[s]),t.useEffect(()=>{T.current?T.current=!1:B&&F&&"unmounted"===E||(M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{V(F||R||H||S)},20))},[F,R,H,S,B,E,V]),t.useLayoutEffect(()=>{"mountPending"!==E&&"unmountPending"!==E||(G.current=setTimeout(()=>null==f?void 0:f({value:"mountPending"===E}),I))},[E,I,f]);const $={onFocus:e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&_)&&(k.current=e.target)}},q={onMouseEnter:e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&_)&&(k.current=e.target)}};let X;if(v)X=l.mergeProps(y,U,q,$);else{const e=Object.assign({"aria-describedby":L},B&&{onMouseLeave:()=>{"mounting"!==E&&w()},onMouseMove:e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&_)&&(e=>{var t;if("unmounted"!==E&&("datatip"!==c||"mounted"!==E))return;const n=null===(t=null==k?void 0:k.current)||void 0===t?void 0:t.getBoundingClientRect(),o=document.body.scrollLeft+((null==n?void 0:n.left)||0)+((null==n?void 0:n.width)||0),s=document.body.scrollTop+((null==n?void 0:n.top)||0)+((null==n?void 0:n.height)||0),i="pointer"===p.x?e.clientX:o,u="pointer"===p.y?e.clientY:s;"mounted"===E?(C.current={x:i,y:u},!0!==P&&x(!0)):"unmounted"===E&&(w(),G.current=setTimeout(()=>{"unmounted"===E&&(C.current={x:i,y:u},null==f||f({value:!0}))},I))})(e)}});X=l.mergeProps(y,U,N,q,$,e)}if(v)return w(),{tooltipContent:null,tooltipProps:X};const Y=(e=>{let t="bottom";switch(e){case"top":case"end":case"bottom":case"start":t=e;break;case"top-end":t="top-end-corner";break;case"bottom-end":t="bottom-end-corner";break;case"bottom-start":t="bottom-start-corner";break;case"top-start":t="top-start-corner"}return t})(d),z=n.jsx(i.Layer,Object.assign({logicalParentRef:k},{children:n.jsx(b.Floating,Object.assign({anchorRef:D,placement:Y,offsetValue:g},{children:n.jsx(j,Object.assign({isOpen:["mounting","mounted","unmountPending"].includes(E)},O,{isDatatip:_,onTransitionEnd:()=>{"mounting"===E&&A("mounted"),"unmounting"===E&&A("unmounted")}},{children:e}))}))}));return{tooltipContent:!["unmounted","mountPending"].includes(E)&&z,tooltipProps:X}});e.useTooltip=({text:e,position:n="bottom",isDisabled:o=!1,anchor:s={x:"element",y:"element"},offset:i={mainAxis:0,crossAxis:0},variant:u="tooltip"})=>{const[r,a]=t.useState(!1),l=o||!e,{tooltipContent:c,tooltipProps:d}=O({text:e,isOpen:r,position:n,isDisabled:l,offset:i,anchor:s,variant:u,onToggle:({value:e})=>a(e)});return{tooltipContent:c,tooltipProps:d}},e.useTooltipControlled=O,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_useTooltip.js.map
