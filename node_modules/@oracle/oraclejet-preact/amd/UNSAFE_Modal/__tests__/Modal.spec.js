define(["preact/jsx-runtime","preact","preact/hooks","@testing-library/preact","chai","../../UNSAFE_Layer","../../Modal-e0d979a7","preact/compat","../../useModal-221efa6e","../../UNSAFE_FocusTrap","../../FocusTrap-d4cc44b1","../../utils/UNSAFE_classNames","../../classNames-b7cf3c05","css!./../../UNSAFE_Modal.css","../../utils/PRIVATE_tabbableUtils","../../_curry1-67906f4c","../../_curry2-fc31d1f8","../../_curry3-9a7f6d78"],function(e,t,s,n,c,i,o,a,r,u,l,d,x,m,p,f,b,j){"use strict";const g=({submitButtonRef:s})=>e.jsxs(t.Fragment,{children:[e.jsx("input",{id:"inside_input"}),e.jsx("button",Object.assign({id:"inside_cancel"},{children:"Cancel"})),e.jsx("button",Object.assign({id:"inside_submit",ref:s},{children:"Submit"}))]}),y=({autoFocusTest:t=!1,isOpen:n=!0,restoreFocusTest:c=!1})=>{const a=s.useRef(null),r=s.useRef(null);let u,l;return t&&(u=a),c&&(l=r),e.jsxs(i.LayerManager,{children:[e.jsx("button",{children:"Preceding Button"}),e.jsx(o.Modal,Object.assign({autoFocusRef:u,isOpen:n,restoreFocusRef:l},{children:e.jsx(g,{submitButtonRef:a})})),e.jsx("button",Object.assign({ref:r},{children:"Following Button"}))]})};describe("Test Modal component",()=>{beforeEach(()=>{Object.defineProperty(HTMLElement.prototype,"offsetParent",{get(){return this.parentNode}})}),it("renders and sets default focus on first tabbable item",async()=>{const{getByRole:t}=n.render(e.jsx(y,{})),s=t("textbox");await n.waitFor(()=>{c.expect(document.activeElement).equals(s)})}),it("renders and sets initial focus to specified element",async()=>{const{getByText:t}=n.render(e.jsx(y,{autoFocusTest:!0})),s=t("Submit");await n.waitFor(()=>{c.expect(document.activeElement).equals(s)})}),it("unmounts and resets focus to original element",async()=>{const{getByRole:t,getByText:s,rerender:i}=n.render(e.jsx(y,{isOpen:!1})),o=s("Preceding Button");o.focus(),c.expect(document.activeElement).equals(o),i(e.jsx(y,{isOpen:!0}));const a=t("textbox");c.expect(document.activeElement).equals(a),i(e.jsx(y,{isOpen:!1})),await n.waitFor(()=>{c.expect(document.activeElement).equals(o)})}),it("unmounts and resets focus to specified element",async()=>{const{getByRole:t,getByText:s,rerender:i}=n.render(e.jsx(y,{isOpen:!1})),o=s("Preceding Button"),a=s("Following Button");o.focus(),c.expect(document.activeElement).equals(o),i(e.jsx(y,{isOpen:!0,restoreFocusTest:!0}));const r=t("textbox");c.expect(document.activeElement).equals(r),i(e.jsx(y,{isOpen:!1})),await n.waitFor(()=>{c.expect(document.activeElement).equals(a)})})})});
//# sourceMappingURL=Modal.spec.js.map
