define(["exports","./tslib.es6-d8595453","preact/jsx-runtime","./UNSAFE_Layer","./utils/PRIVATE_clientHints","preact/compat",'module',"./UNSAFE_Floating","preact/hooks","./hooks/PRIVATE_useCollectionFocusRing","./utils/UNSAFE_mergeProps","./utils/UNSAFE_classNames","./MenuItem-cedf713b","./classNames-b7cf3c05","./hooks/UNSAFE_useOutsideClick","./Floating-2dad3061","./useModal-221efa6e","./clientHints-0d38de57"],function(e,n,t,s,r,o,l,a,i,c,u,d,f,p,m,g,h,v){"use strict";const b=e=>e.dataset.ojMenuItemKey,j=e=>{if(e){const n=e.querySelector("[data-oj-menu-item-key]");if(n){const e=b(n);if(e)return e}}return null},y=(e,n,t)=>()=>{if(e){const s=Array.from(e.querySelectorAll("[data-oj-menu-item-key]"));let r=s.findIndex(e=>b(e)===t)+(n?-1:1);const o=s.length-1;return r<0&&(r=o),r>o&&(r=0),b(s[r])||null}return null},C=e=>{const n=e.closest("[data-oj-menu-item-key]");if(n){const e=b(n);return void 0===e?null:e}return null},k={menuContainer:"j91n3a",dropdownMenuContainer:"_1dohnnf",sheetMenuContainer:"_78wq11"},x=({children:e,onClose:n,accessibleLabel:s,initialFocus:r="menu",display:o})=>{const l=i.useRef(null),a=i.useRef(r),[d,m]=i.useState(),[g,h]=i.useState("pending"),v=i.useCallback(e=>{m(e.value),h("firstItem")},[]),[x,w]=c.useCollectionFocusRing(e=>{var n;return!!(null===(n=l.current)||void 0===n?void 0:n.contains(e))},["ArrowUp","ArrowDown"],e=>!!C(e)),{currentKeyProps:O}=function(e,n,t,s,r,o,l){const a=i.useCallback(e=>{if(l)if("ArrowDown"!==e.key||e.shiftKey)if("ArrowUp"!==e.key||e.shiftKey){if("Home"===e.key){const n=s();n&&o!=n&&l({value:n}),e.preventDefault()}else if("End"===e.key){const n=r();n&&o!=n&&l({value:n}),e.preventDefault()}}else{const t=n();t&&o!=t&&l({value:t}),e.preventDefault()}else{const n=t();n&&o!=n&&l({value:n}),e.preventDefault()}},[o,t,n,l,s,r]),c=i.useCallback(n=>{if(l&&!n.shiftKey){const t=e(n.target);t&&o!=t&&l({value:t})}},[o,e,l]);return{currentKeyProps:null==l?{}:{onClickCapture:c,onKeyDown:a}}}(e=>C(e),y(l.current,!0,d),y(l.current,!1,d),()=>j(l.current),()=>(e=>{if(e){const n=e.querySelectorAll("[data-oj-menu-item-key]"),t=n[n.length-1];if(t){const e=b(t);if(e)return e}}return null})(l.current),d,v);return i.useEffect(()=>{const e=l.current;if(e)if("menu"===a.current)setTimeout(()=>{e.focus()},0),h("menu");else{const e=j(l.current);e?v({value:e}):h("menu")}},[a,v]),t.jsx("div",Object.assign({ref:l,tabIndex:"firstItem"===g?-1:0,role:"menu","aria-label":s,class:p.classNames([k.menuContainer,k[`${o}MenuContainer`]])},u.mergeProps(w,O,{onPointerDown:e=>{C(e.target)||e.preventDefault()}},(e=>({onKeyDown:n=>{"Tab"===n.key?(null==e||e({reason:"dismissed"}),n.preventDefault()):"Escape"===n.key&&(null==e||e({reason:"dismissed"}))}}))(n)),{children:t.jsx(f.MenuContext.Provider,Object.assign({value:{onClose:n,currentKey:d,showFocusRing:x}},{children:e}))}))},w="_18mgcg8",O=e=>{var{anchorRef:s,onClose:r}=e,l=n.__rest(e,["anchorRef","onClose"]);const a=o.useRef(null),i=o.useCallback(e=>{null==r||r({reason:"outsideClick",target:e.target})},[r]);return m.useOutsideClick({ref:[a],handler:i}),t.jsx(g.Floating,Object.assign({class:w,ref:a,anchorRef:s,placement:"bottom-start",offsetValue:{mainAxis:4,crossAxis:0}},{children:t.jsx("div",Object.assign({style:{minWidth:`${s.current&&s.current.offsetWidth>T?s.current.offsetWidth:T}px`}},{children:t.jsx(x,Object.assign({},Object.assign({onClose:r},l),{display:"dropdown"}))}))}))},T=200;const D="pv4inq",R="x62vcr",_="_10ke6sd",S="_1w64tom",A=({children:e})=>t.jsx("div",Object.assign({class:D},{children:e})),I=o.forwardRef(({children:e},n)=>t.jsx("div",Object.assign({class:R,ref:n},{children:e}))),E=()=>t.jsx("div",{class:S}),F=e=>{var{onClose:s}=e,r=n.__rest(e,["onClose"]);i.useEffect(()=>{const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[]);const o=i.useCallback(()=>{null==s||s({reason:"dismissed"})},[s]),{modalRef:l}=h.useModal({isOpen:!0,onBackdropClick:o}),{swipeProps:a}=function(e,{threshold:n=10,maximumTime:t=300,tolerance:s=50,isDisabled:r=!1}={threshold:10,maximumTime:300,tolerance:50,isDisabled:!1}){const o=i.useRef({pointerDownId:0,startTime:null,prevpageX:0,prevpageY:0,elementScrollTop:0}),l=i.useCallback(()=>{o.current={pointerDownId:null,startTime:0,prevpageX:0,prevpageY:0,elementScrollTop:0}},[]),a=i.useCallback(e=>{const n=e.changedTouches[0];o.current.pointerDownId?l():o.current={pointerDownId:n.identifier,startTime:e.timeStamp,prevpageX:n.pageX,prevpageY:n.pageY,elementScrollTop:e.currentTarget.scrollTop}},[l]),c=i.useCallback(r=>{const a=r.changedTouches[0];a.identifier===o.current.pointerDownId&&o.current.startTime&&r.timeStamp-o.current.startTime<t&&a.pageY-o.current.prevpageY>n&&Math.abs(a.pageX-o.current.prevpageX)<=s&&0===o.current.elementScrollTop&&(null==e||e({direction:"down"})),l()},[n,e,l,t,s]);return{swipeProps:r?{}:{onTouchStart:a,onTouchEnd:c,ontouchcancel:l}}}(o);return t.jsxs(A,{children:[t.jsx(E,{}),t.jsx(I,Object.assign({ref:l},{children:t.jsx("div",Object.assign({class:_},a,{children:t.jsx(x,Object.assign({},Object.assign(Object.assign({},r),{onClose:s}),{display:"sheet"}))}))}))]})},{deviceType:P}=v.getClientHints(),M="phone"===P;e.Menu=e=>{var{isOpen:r,anchorRef:o}=e,l=n.__rest(e,["isOpen","anchorRef"]);return r?t.jsx(s.Layer,Object.assign({logicalParentRef:o},{children:M?t.jsx(F,Object.assign({},l)):t.jsx(O,Object.assign({},Object.assign({anchorRef:o},l)))})):null}});
//# sourceMappingURL=Menu-cb21d7c2.js.map
